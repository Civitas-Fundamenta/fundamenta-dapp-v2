(this["webpackJsonpciviport-web-react"]=this["webpackJsonpciviport-web-react"]||[]).push([[0],{335:function(e,t,n){},353:function(e,t){},404:function(e,t){},406:function(e,t){},415:function(e,t){},417:function(e,t){},443:function(e,t){},445:function(e,t){},446:function(e,t){},451:function(e,t){},453:function(e,t){},459:function(e,t){},461:function(e,t){},474:function(e,t){},486:function(e,t){},489:function(e,t){},556:function(e,t){},559:function(e,t){},631:function(e,t){},651:function(e,t){},658:function(e,t){},675:function(e,t){},676:function(e,t){},724:function(e,t){},804:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(91),o=n.n(c),i=(n(335),n(5)),s=n(7),u=n(10),l=n(9),d=n(27),p=(n(336),n(813)),h=n(814),b=n(79),m=n(1),f=n.n(m),k=n(6),v=n(3),w=n.n(v),x=(n(803),n(23)),j=n.n(x),y=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"fetchNetworkConfig",value:function(t){this.network?t(this.network):(console.log("Fetching network config"),w.a.ajax({url:"https://".concat(this.app.resourceUrl,"/config/?x=").concat(this.app.cpNet),dataType:"json",cache:"false",success:function(n){e.network=n,t(n)}}))}}]),e}();y.network=null,y.app={cpNet:"mainnet",serverCount:3,serverDomain:"civiport.online",confTime:12,withdrawEventHash:"0x9e817a273ceb82157d1f8e11c7d5549ada176ef895a9ffe5e37b49de76d29e2d",resourceUrl:"cp3.civiport.online",bridgeAbi:[{inputs:[{internalType:"bytes",name:"clientSignature",type:"bytes"},{internalType:"bytes[]",name:"serverSignatures",type:"bytes[]"},{internalType:"bytes",name:"transactionData",type:"bytes"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"clientSignature",type:"bytes"},{internalType:"bytes",name:"transactionData",type:"bytes"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],tokenAbi:[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"unwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"wrap",outputs:[],stateMutability:"nonpayable",type:"function"}],stakeAbi:[{inputs:[{internalType:"uint256",name:"_stake",type:"uint256"}],name:"createStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakeholder",type:"address"}],name:"stakeOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_stake",type:"uint256"}],name:"removeStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"compoundRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardsAccrued",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],miningAbi:[{inputs:[],name:"showCurrentLockPeriods",outputs:[{internalType:"uint256",name:"_lockPeriod0",type:"uint256"},{internalType:"uint256",name:"_lockPeriod1",type:"uint256"},{internalType:"uint256",name:"_lockPeriod2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contract IERC20",name:"ContractAddress",type:"address"},{internalType:"uint256",name:"TotalRewardsPaidByPool",type:"uint256"},{internalType:"uint256",name:"TotalLPTokensLocked",type:"uint256"},{internalType:"uint256",name:"PoolBonus",type:"uint256"},{internalType:"uint256",name:"lockPeriod0BasisPoint",type:"uint256"},{internalType:"uint256",name:"lockPeriod1BasisPoint",type:"uint256"},{internalType:"uint256",name:"lockPeriod2BasisPoint",type:"uint256"},{internalType:"uint256",name:"compYield0",type:"uint256"},{internalType:"uint256",name:"compYield1",type:"uint256"},{internalType:"uint256",name:"compYield2",type:"uint256"},{internalType:"uint256",name:"maxPoolBP",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"},{internalType:"uint256",name:"_pid",type:"uint256"}],name:"accountPosition",outputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"uint256",name:"_unlockHeight",type:"uint256"},{internalType:"uint256",name:"_lockedAmount",type:"uint256"},{internalType:"uint256",name:"_lockPeriodInDays",type:"uint256"},{internalType:"uint256",name:"_userDPY",type:"uint256"},{internalType:"contract IERC20",name:"_lpTokenAddress",type:"address"},{internalType:"uint256",name:"_totalRewardsPaidFromPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_lpTokenAmount",type:"uint256"},{internalType:"uint256",name:"_lockPeriod",type:"uint256"},{internalType:"uint256",name:"_pid",type:"uint256"}],name:"addPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"removePosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_lpTokenAmount",type:"uint256"}],name:"withdrawAccruedYieldAndAdd",outputs:[],stateMutability:"nonpayable",type:"function"}],lpPools:{1:{0:"FMTA/ETH",1:"FMTA/USDC"},4:{0:"FMTA/WETH"},56:{0:"FMTA/BNB"}}};var O=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"wrappable",value:function(e){if(!this.wrapData){var t=[];w.a.each(e,(function(){var e=this,n={chainId:this.chainId,network:this.network,ticker:this.ticker,tokens:[]};w.a.each(e.tokens,(function(){if(this.wrappedTokenAddress){var t={name:this.name,ticker:this.ticker,wrappedName:"",wrappedTicker:"",tokenAddress:this.tokenAddress,wrappedTokenAddress:this.wrappedTokenAddress,decimals:this.decimals};w.a.each(e.tokens,(function(){this.tokenAddress===t.wrappedTokenAddress&&(t.wrappedName=this.name,t.wrappedTicker=this.ticker)})),n.tokens.push(t)}})),n.tokens.length>0&&t.push(n)})),this.wrapData=t}}}]),e}();O.wrapData=null;var g=n(52),T=n(184),N=n(322),A=n(323),C=n.n(A),_=n(185),I=n.n(_),S=Object(N.a)("registerProvider"),M=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"getNetworkName",value:function(){return this.networkNames.has(this.chainId)?this.networkNames.get(this.chainId):"unknown"}},{key:"addListener",value:function(e,t){this.emitters.has(e)||this.emitters.set(e,t)}},{key:"removeListener",value:function(e){this.emitters.has(e)&&this.emitters.delete(e)}},{key:"hasListener",value:function(e){return this.emitters.has(e)}},{key:"isConnected",value:function(){return null!=this.web3}},{key:"isMetamaskAvailable",value:function(){return window.ethereum}},{key:"walletConnect",value:function(){var t=Object(k.a)(f.a.mark((function t(){var n=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isMetamask=!1,this.isWalletConnect=!0,console.log("Using WalletConnect provider"),this.provider=new C.a({rpc:{1:"https://mainnet.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783",4:"https://rinkeby.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783",5:"https://goerli.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783",56:"https://bsc-dataseed.binance.org/"},chainId:"testnet"===y.cpNet?4:1,qrcodeModalOptions:{mobileLinks:[]}}),this.web3=new I.a(this.provider),Object(T.a)(this,S)[S](),this.provider.wc.on("wc_sessionUpdate",(function(t,a){if(t)return n.chainId=0,void console.warn("wc_sessionUpdate",t);if(a){n.chainId=a.params[0].chainId,console.log("chainChanged",n.chainId);var r,c=Object(g.a)(e.emitters.values());try{for(c.s();!(r=c.n()).done;){r.value.emit("chainChanged",a.params[0].chainId)}}catch(o){c.e(o)}finally{c.f()}}})),t.prev=7,t.next=10,this.provider.enable();case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(7),this.isWalletConnect=!1,t.abrupt("return",!1);case 16:return t.next=18,this.provider.request({method:"eth_requestAccounts"});case 18:return t.t1=parseInt,t.next=21,this.provider.request({method:"eth_chainId"});case 21:return t.t2=t.sent,this.chainId=(0,t.t1)(t.t2),t.abrupt("return",!0);case 24:case"end":return t.stop()}}),t,this,[[7,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"metamask",value:function(){var t=Object(k.a)(f.a.mark((function t(){var n,a,r,c,o,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isWalletConnect=!1,this.isMetamask=!0,console.log("Using MetaMask provider"),this.provider=window.ethereum,this.web3=new I.a(this.provider),Object(T.a)(this,S)[S](),!window.ethereum.selectedAddress){t.next=18;break}console.log("Metamask already approved for this site"),this.web3.eth.defaultAccount=window.ethereum.selectedAddress,n=Object(g.a)(this.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("accountsChanged",[window.ethereum.selectedAddress])}catch(s){n.e(s)}finally{n.f()}return t.t0=parseInt,t.next=14,this.provider.request({method:"eth_chainId"});case 14:t.t1=t.sent,this.chainId=(0,t.t0)(t.t1),t.next=25;break;case 18:return t.next=20,this.provider.request({method:"eth_requestAccounts"});case 20:return t.t2=parseInt,t.next=23,this.provider.request({method:"eth_chainId"});case 23:t.t3=t.sent,this.chainId=(0,t.t2)(t.t3);case 25:r=Object(g.a)(this.emitters.values());try{for(r.s();!(c=r.n()).done;)c.value.emit("chainChanged",e.chainId)}catch(s){r.e(s)}finally{r.f()}o=Object(g.a)(this.emitters.values());try{for(o.s();!(i=o.n()).done;)i.value.emit("connect")}catch(s){o.e(s)}finally{o.f()}return t.abrupt("return",!0);case 30:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"switchNetwork",value:function(){var e=Object(k.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isWalletConnect){e.next=2;break}return e.abrupt("return");case 2:return this.provider.chainId=t,this.provider.networkId=t,e.next=6,this.provider.request({method:"wc_sessionUpdate",params:[{chainId:t,approved:!0}]});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3=null,!this.provider){e.next=5;break}if(!this.isWalletConnect){e.next=5;break}return e.next=5,this.provider.disconnect();case 5:if(this.provider=null,this.isMetamask){t=Object(g.a)(this.emitters.values());try{for(t.s();!(n=t.n()).done;)n.value.emit("disconnect",null)}catch(a){t.e(a)}finally{t.f()}}this.isWalletConnect=!1,this.isMetamask=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function D(e){w()(e).addClass("d-none")}function P(e){w()(e).addClass("disable"),w()(e).prop("disabled",!0),w()(e).find("*").addClass("disable"),w()(e).find("*").prop("disabled",!0)}function W(e){w()(e).removeClass("d-none")}function U(e){w()(e).removeClass("disable"),w()(e).prop("disabled",!1),w()(e).find("*").removeClass("disable"),w()(e).find("*").prop("disabled",!1)}Object.defineProperty(M,S,{value:function(){this.provider.on("accountsChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&t.length>0){M.web3.eth.defaultAccount=t[0],n=Object(g.a)(M.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("accountsChanged",t)}catch(r){n.e(r)}finally{n.f()}}else M.disconnect();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.provider.on("chainChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.isMetamask?M.chainId=parseInt(t):M.chainId=t,n=Object(g.a)(M.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("chainChanged",M.chainId)}catch(r){n.e(r)}finally{n.f()}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.provider.on("connect",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(g.a)(M.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("connect",t)}catch(r){n.e(r)}finally{n.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.provider.on("disconnect",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(g.a)(M.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("disconnect",t)}catch(r){n.e(r)}finally{n.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),M.web3=null,M.provider=null,M.chainId=0,M.emitters=new Map,M.isWalletConnect=!1,M.isMetamask=!1,M.networkNames=new Map([[1,"ethereum"],[4,"rinkeby"],[5,"goerli"],[56,"binance"]]);var F=n(0),R=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"toggleNetworkWarning",value:function(){if(!M.isConnected())return console.log("wallet not connected"),D("#_aInvNet"),D("#_aAcc"),void W("#_aNoAcc");null==M.web3.eth.defaultAccount?(D("#_aAcc"),W("#_aNoAcc")):(w()("#_aAccText").text(M.web3.eth.defaultAccount),D("#_aNoAcc"),W("#_aAcc")),R.getFromMap(M.chainId)?D("#_aInvNet"):(w()("#_aInvNetText").text("Invalid network. Wallet set to chain ".concat(M.chainId)),W("#_aInvNet"))}},{key:"openModal",value:function(){w()("#_modSelect").addClass("d-block"),w()("#_modSelect").addClass("show")}},{key:"closeModal",value:function(){w()("#_modSelect").removeClass("d-block"),w()("#_modSelect").removeClass("show")}},{key:"empty",value:function(){w()("#_sNs").empty(),w()("#_sNs").append("<option>Select Network</option>"),this.networkMap.length=0,this.networkMap.push({chainId:0})}},{key:"populateAll",value:function(){this.empty(),y.fetchNetworkConfig((function(e){w.a.each(e,(function(){R.networkMap.push(this),w()("#_sNs").append('<option value="'.concat(this.chainId,'">').concat(this.network,"</option>"))}))})),M.isConnected()?this.set(M.chainId):this.set(0),this.toggleNetworkWarning()}},{key:"populateWrappable",value:function(){this.empty(),y.fetchNetworkConfig((function(e){O.wrappable(e),w.a.each(O.wrapData,(function(){R.networkMap.push(this),w()("#_sNs").append('<option value="'.concat(this.chainId,'">').concat(this.network,"</option>"))}))})),M.isConnected()?this.set(M.chainId):this.set(0),this.toggleNetworkWarning()}},{key:"populateMineable",value:function(){this.empty(),y.fetchNetworkConfig((function(e){w.a.each(e,(function(){this.liquidityMining.address!==R.emptyAddress&&(R.networkMap.push(this),w()("#_sNs").append('<option value="'.concat(this.chainId,'">').concat(this.network,"</option>")))}))})),M.isConnected()?this.set(M.chainId):this.set(0),this.toggleNetworkWarning()}},{key:"getFromMap",value:function(e){if(0===e)return null;var t=null;return w.a.each(this.networkMap,(function(n,a){if(a.chainId===e)return t=a,!1})),t}},{key:"get",value:function(){var e=w()("#_sNs option:selected").val(),t=w()("#_sNs option:selected").text();return{chainId:parseInt(e),network:t}}},{key:"set",value:function(e){this.get().chainId!==e&&(R.getFromMap(M.chainId)?(w()("#_sNs").off("change"),w.a.each(this.networkMap,(function(t,n){if(n.chainId===e)return w()("#_sNs").prop("selectedIndex",t),!1})),w()("#_sNs").on("change",this._sNs_change)):w()("#_sNs").prop("selectedIndex",0))}},{key:"_sNs_change",value:function(){if(M.isConnected){var e=R.get();isNaN(e.chainId)?(w()("#_aInvNetText").text("Select a network to continue"),W("#_aInvNet")):e.chainId!==M.chainId?M.isMetamask?(w()("#_aInvNetText").text("Switch metamask to the ".concat(e.network," network")),W("#_aInvNet")):M.isWalletConnect&&(w()("#_aInvNetText").text("Sending request to change to the ".concat(e.network," network")),W("#_aInvNet"),M.switchNetwork(e.chainId)):D("#_aInvNet")}}},{key:"_btnC_clicked",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.isMetamaskAvailable()){e.next=5;break}console.log("Metamask is available. Displaying modal"),R.openModal(),e.next=10;break;case 5:return console.log("Metamask not available. Defaulting to Wallet Connect"),e.next=8,M.walletConnect();case 8:e.sent?(D("#_btnC"),W("#_btnD")):(D("#_btnD"),W("#_btnC"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_btnE_clicked",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.closeModal();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_btnD_clicked",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.disconnect();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_wc_clicked",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.closeModal(),e.next=3,M.walletConnect();case 3:e.sent?(D("#_btnC"),W("#_btnD")):(D("#_btnD"),W("#_btnC"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_mm_clicked",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.closeModal(),e.next=3,M.metamask();case 3:e.sent?(D("#_btnC"),W("#_btnD")):(D("#_btnD"),W("#_btnC"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();R.networkMap=[],R.emptyAddress="0x0000000000000000000000000000000000000000";var E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){if(!M.hasListener("networkSelect")){var e=new j.a;e.on("connect",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("#_sNs"),D("#_btnC"),W("#_btnD"),R.set(M.chainId),R.toggleNetworkWarning();case 5:case"end":return e.stop()}}),e)})))),e.on("disconnect",(function(){P("#_sNs"),D("#_btnD"),W("#_btnC"),R.set(0),R.toggleNetworkWarning()})),e.on("accountsChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===t||0===t.length?(P("#_sNs"),D("#_btnD"),W("#_btnC"),R.set(0),R.toggleNetworkWarning()):(w()("#_btnD").text(M.getNetworkName()),D("#_btnC"),W("#_btnD"),R.toggleNetworkWarning());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("chainChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w()("#_btnD").text(M.getNetworkName()),R.set(t),R.toggleNetworkWarning();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M.addListener("networkSelect",e)}R.empty(),R.set(0),M.isConnected()?(w()("#_btnD").text(M.getNetworkName()),D("#_btnC"),W("#_btnD"),R.toggleNetworkWarning()):(D("#_btnD"),W("#_btnC"),P("#_sNs"),R.toggleNetworkWarning())}},{key:"render",value:function(){return Object(F.jsxs)("div",{className:"d-flex",children:[Object(F.jsx)("select",{id:"_sNs",className:"form-select",onChange:R._sNs_change,style:{width:"auto"}}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{className:"btn btn-outline-success",id:"_btnC",onClick:R._btnC_clicked,children:"Connect"}),Object(F.jsx)("button",{className:"btn btn-outline-danger",id:"_btnD",onClick:R._btnD_clicked,children:"Disconnect"}),Object(F.jsx)("div",{className:"modal fade",id:"_modSelect",tabIndex:"-1",role:"dialog","aria-hidden":"true",children:Object(F.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(F.jsxs)("div",{className:"modal-content",children:[Object(F.jsx)("div",{className:"modal-header",children:Object(F.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"Select Wallet"})}),Object(F.jsxs)("div",{className:"modal-body",children:[Object(F.jsx)("div",{children:Object(F.jsx)("button",{className:"btn btn-outline-primary p-3 mb-3 w-100",onClick:R._wc_clicked,children:"Wallet Connect"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{className:"btn btn-outline-warning p-3 w-100",onClick:R._mm_clicked,children:"MetaMask"})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h4",{children:"Note to Wallet Connect users:"}),Object(F.jsx)("div",{children:"Fundamenta is a multi-chain system. Your ability to use this dapp may be impacted if your wallet does not support network switching."}),Object(F.jsx)("br",{}),Object(F.jsx)("div",{children:"For the best experience it is recommended to use the CiviPort mobile app, available for iOS and Android."})]})]}),Object(F.jsx)("div",{className:"modal-footer",children:Object(F.jsx)("button",{type:"button",className:"btn btn-danger",onClick:R._btnE_clicked,children:"Exit"})})]})})})]})]})}}]),n}(r.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"alert alert-warning p-0",role:"alert",children:"The CiviPort Web Teleporter is Beta software."}),Object(F.jsxs)("div",{className:"d-flex p-0 ps-3 pe-3",children:[Object(F.jsx)("div",{className:"w-100 justify-content-start",children:Object(F.jsxs)(p.a,{collapseOnSelect:!0,expand:"md",className:"navbar navbar-expand-md p-0",children:[Object(F.jsx)(p.a.Toggle,{}),Object(F.jsx)(p.a.Collapse,{children:Object(F.jsxs)(h.a,{children:[Object(F.jsx)(b.LinkContainer,{to:"/staking",children:Object(F.jsx)(h.a.Link,{className:"ps-0",children:"Staking"})}),Object(F.jsx)(b.LinkContainer,{to:"/mining",children:Object(F.jsx)(h.a.Link,{children:"Mining"})}),Object(F.jsx)(b.LinkContainer,{to:"/teleport",children:Object(F.jsx)(h.a.Link,{children:"Teleport"})}),Object(F.jsx)(b.LinkContainer,{to:"/wrap",children:Object(F.jsx)(h.a.Link,{children:"Wrap"})}),Object(F.jsx)(b.LinkContainer,{to:"/unwrap",children:Object(F.jsx)(h.a.Link,{children:"Unwrap"})}),Object(F.jsx)(b.LinkContainer,{to:"/energize",children:Object(F.jsx)(h.a.Link,{children:"Energize"})})]})})]})}),Object(F.jsx)("div",{className:"justify-content-end",children:Object(F.jsx)(E,{})})]}),Object(F.jsxs)("div",{className:"p-0 ps-3 pe-3 pt-3",children:[Object(F.jsx)("div",{id:"_aAcc",className:"popup-div-margins alert alert-success d-flex align-items-center input-group",role:"alert",children:Object(F.jsx)("div",{id:"_aAccText",className:"text-truncate d-inline-block"})}),Object(F.jsx)("div",{id:"_aNoAcc",className:"popup-div-margins alert alert-danger d-flex align-items-center input-group",role:"alert",children:Object(F.jsx)("div",{className:"text-truncate d-inline-block",children:"No account connected."})}),Object(F.jsx)("div",{id:"_aInvNet",className:"popup-div-margins alert alert-warning d-flex align-items-center input-group",role:"alert",children:Object(F.jsx)("div",{id:"_aInvNetText",className:"text-truncate d-inline-block"})})]})]})}}]),n}(r.a.Component),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.populateAll();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3"})}}]),n}(r.a.Component),H=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"to8bitHex",value:function(e){return("00"+e.toString(16)).slice(-2)}},{key:"to32bitHex",value:function(e){return("00000000"+e.toString(16)).slice(-8)}},{key:"to64bitHex",value:function(e){return("0000000000000000"+e.toString(16)).slice(-16)}},{key:"bin2hex",value:function(t){for(var n="",a=0;a<t.length;a++)n+=e.to8bitHex(t[a]);return n}},{key:"toBigIntHex",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toString(16).padStart(64,"0"),e.next=3,n.match(/[a-fA-F0-9]{2}/g).reverse().join("");case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"toAtomicUnitsHex",value:function(e,t){return isNaN(t)&&(t=18),(e*Math.pow(10,t)).toString(16).padStart(64,"0")}},{key:"toAtomicUnitsHexPrefixed",value:function(e,t){return isNaN(t)&&(t=18),"0x".concat((e*Math.pow(10,t)).toString(16).padStart(64,"0"))}},{key:"toAtomicUnits",value:function(e,t){return isNaN(t)&&(t=18),e*Math.pow(10,t)}},{key:"fromAtomicUnits",value:function(e,t){return isNaN(t)&&(t=18),e/Math.pow(10,t)}}]),e}(),q=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"clear",value:function(){D("#okAlert"),D("#warnAlert"),D("#errorAlert")}},{key:"showOk",value:function(e){w()("#okAlertText").text(e),W("#okAlert")}},{key:"showWarn",value:function(e){w()("#warnAlertText").text(e),W("#warnAlert")}},{key:"showError",value:function(e){w()("#errorAlertText").text(e),W("#errorAlert")}}]),e}(),z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(F.jsxs)("div",{className:"mt-3",children:[Object(F.jsx)("div",{id:"okAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-success d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"okAlertText",className:"text-truncate d-inline-block"})})}),Object(F.jsx)("div",{id:"warnAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-warning d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"warnAlertText",className:"text-truncate d-inline-block"})})}),Object(F.jsx)("div",{id:"errorAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-danger d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"errorAlertText",className:"text-truncate d-inline-block"})})})]})}}]),n}(r.a.Component),Y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).btnTake_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:return n=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Take",!1),r=!1,e.prev=9,e.next=12,n.methods.withdrawReward().send({from:M.web3.eth.defaultAccount});case 12:c=e.sent,console.log("Transaction: ",c),r=c.status,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0),r=!1;case 21:return e.next=23,a.validateUiState();case 23:q.clear(),r?q.showOk("Taking stake rewards success!"):q.showError("Taking stake rewards failed!");case 25:case"end":return e.stop()}}),e,null,[[9,17]])}))),a.btnCompound_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:return n=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Compound",!1),r=!1,e.prev=9,e.next=12,n.methods.compoundRewards().send({from:M.web3.eth.defaultAccount});case 12:c=e.sent,console.log("Transaction: ",c),r=c.status,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0),r=!1;case 21:return e.next=23,a.validateUiState();case 23:q.clear(),r?q.showOk("Compounding stake rewards success!"):q.showError("Compounding stake rewards failed!");case 25:case"end":return e.stop()}}),e,null,[[9,17]])}))),a.btnAdd_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:if(n=parseFloat(w()("#inAddAmount").val()),!(isNaN(n)||n<=0)){e.next=7;break}return q.showWarn("Invalid amount entered"),e.abrupt("return");case 7:return e.next=9,a.getBalance(t);case 9:if(r=e.sent,!(isNaN(r)||r<n)){e.next=13;break}return q.showWarn("Amount exceeds balance"),e.abrupt("return");case 13:return c=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),o=H.toAtomicUnitsHexPrefixed(n,t.fmtaToken.decimals),q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Add",!1),i=!1,e.prev=20,e.next=23,c.methods.createStake(o).send({from:M.web3.eth.defaultAccount});case 23:s=e.sent,console.log("Transaction: ",s),i=s.status,e.next=32;break;case 28:e.prev=28,e.t0=e.catch(20),console.error(e.t0),i=!1;case 32:return e.next=34,a.validateUiState();case 34:q.clear(),i?q.showOk("Creating stake success!"):q.showError("Creating stake failed!"),w()("#inAddAmount").val("");case 37:case"end":return e.stop()}}),e,null,[[20,28]])}))),a.btnRemove_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:if(n=parseFloat(w()("#inRemoveAmount").val()),!(isNaN(n)||n<=0)){e.next=7;break}return q.showWarn("Invalid amount entered"),e.abrupt("return");case 7:return e.next=9,a.getStake(t);case 9:if(r=e.sent,!(isNaN(r)||r<n)){e.next=13;break}return q.showWarn("Amount exceeds balance"),e.abrupt("return");case 13:return c=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),o=H.toAtomicUnitsHexPrefixed(n,t.fmtaToken.decimals),q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Remove",!1),i=!1,e.prev=20,e.next=23,c.methods.removeStake(o).send({from:M.web3.eth.defaultAccount});case 23:s=e.sent,console.log("Transaction: ",s),i=s.status,e.next=32;break;case 28:e.prev=28,e.t0=e.catch(20),console.error(e.t0),i=!1;case 32:return e.next=34,a.validateUiState();case 34:q.clear(),a.enableTab("Remove",!0),i?q.showOk("Removing stake success!"):q.showError("Removing stake failed!"),w()("#inRemoveAmount").val("");case 38:case"end":return e.stop()}}),e,null,[[20,28]])}))),a.currentTab=null,a}return Object(s.a)(n,[{key:"getStake",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=0,a=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),!M.web3.eth.defaultAccount){e.next=9;break}return e.next=6,a.methods.stakeOf(M.web3.eth.defaultAccount).call();case 6:(r=e.sent)||(r=0),n=H.fromAtomicUnits(r,18);case 9:return e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=0,a=new M.web3.eth.Contract(y.app.tokenAbi,t.fmtaToken.tokenAddress),!M.web3.eth.defaultAccount){e.next=9;break}return e.next=6,a.methods.balanceOf(M.web3.eth.defaultAccount).call();case 6:(r=e.sent)||(r=0),n=H.fromAtomicUnits(r,18);case 9:return e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalances",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a,r,c,o,i,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=0,a=0,r=0,c=new M.web3.eth.Contract(y.app.tokenAbi,t.fmtaToken.tokenAddress),o=new M.web3.eth.Contract(y.app.stakeAbi,t.fmtaToken.stakingAddress),!M.web3.eth.defaultAccount){e.next=22;break}return e.next=9,c.methods.balanceOf(M.web3.eth.defaultAccount).call();case 9:return(i=e.sent)||(i=0),a=H.fromAtomicUnits(i,18),e.next=14,o.methods.stakeOf(M.web3.eth.defaultAccount).call();case 14:return(s=e.sent)||(s=0),n=H.fromAtomicUnits(s,18),e.next=19,o.methods.rewardsAccrued().call();case 19:(u=e.sent)||(u=0),r=H.fromAtomicUnits(u,18);case 22:return e.abrupt("return",{balance:a,stake:n,reward:r});case 25:return e.prev=25,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{balance:0,stake:0,reward:0});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"disableNavBar",value:function(){P("#btnTake"),P("#btnCompound"),P("#btnAdd"),P("#btnRemove")}},{key:"validateUiState",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId),q.clear(),t){e.next=9;break}return this.disableNavBar(),this.hideAllTabs(),w()("#lblBalance").text("0.00"),w()("#lblStake").text("0.00"),w()("#lblReward").text("0.00"),e.abrupt("return");case 9:return e.next=11,this.getBalances(t);case 11:n=e.sent,a=new Intl.NumberFormat("us-us",{style:"decimal",useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:10}),w()("#lblBalance").text(a.format(n.balance)),w()("#lblStake").text(a.format(n.stake)),w()("#lblReward").text(a.format(n.reward)),this.enableTab("Take",n.reward>0),this.enableTab("Compound",n.reward>0),this.enableTab("Add",n.balance>0&&0===n.reward),this.enableTab("Remove",n.stake>0);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enableTab",value:function(e,t){t?(U("#btn".concat(e)),U("#div".concat(e))):(P("#btn".concat(e)),P("#div".concat(e)))}},{key:"hideAllTabs",value:function(){D("#divTake"),D("#divCompound"),D("#divAdd"),D("#divRemove"),this.currentTab=null}},{key:"showTab",value:function(e){e!==this.currentTab&&(D("#divTake"),D("#divCompound"),D("#divAdd"),D("#divRemove"),W(e),this.currentTab=e)}},{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),R.populateAll(),this.hideAllTabs(),M.hasListener("staking")||((t=new j.a).on("connect",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("chainChanged",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),M.addListener("staking",t)),e.next=6,this.validateUiState();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M.removeListener("staking")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"Staking"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)(p.a,{collapseOnSelect:!0,expand:"sm",className:"navbar navbar-expand-sm pt-0",children:[Object(F.jsx)(p.a.Toggle,{}),Object(F.jsx)(p.a.Collapse,{children:Object(F.jsxs)(h.a,{children:[Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start ps-0",style:{outline:"none",border:"none",boxShadow:"none"},id:"btnTake",onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divTake");case 2:case"end":return t.stop()}}),t)}))),children:"Take"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",style:{outline:"none",border:"none",boxShadow:"none"},id:"btnCompound",onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divCompound");case 2:case"end":return t.stop()}}),t)}))),children:"Compound"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnAdd",style:{outline:"none",border:"none",boxShadow:"none"},onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divAdd");case 2:case"end":return t.stop()}}),t)}))),children:"Add"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnRemove",style:{outline:"none",border:"none",boxShadow:"none"},onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divRemove"),P("#btnRemove");case 3:case"end":return t.stop()}}),t)}))),children:"Remove"})]})})]}),Object(F.jsxs)("div",{className:"d-flex pb-3",children:[Object(F.jsxs)("div",{className:"text-end",children:[Object(F.jsx)("div",{children:"FMTA Balance:\xa0"}),Object(F.jsx)("div",{children:"Staked FMTA:\xa0"}),Object(F.jsx)("div",{children:"Rewards:\xa0"})]}),Object(F.jsxs)("div",{className:"text-start",children:[Object(F.jsx)("div",{id:"lblBalance",children:"0"}),Object(F.jsx)("div",{id:"lblStake",children:"0"}),Object(F.jsx)("div",{id:"lblReward",children:"0"})]})]}),Object(F.jsx)("div",{id:"divTake",children:Object(F.jsx)("button",{className:"btn btn-primary w-100",onClick:this.btnTake_Clicked,children:"Take"})}),Object(F.jsx)("div",{id:"divCompound",children:Object(F.jsx)("button",{className:"btn btn-primary w-100",onClick:this.btnCompound_Clicked,children:"Compound"})}),Object(F.jsx)("div",{id:"divAdd",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inAddAmount",className:"form-control input-sm",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"btn btn-primary",onClick:this.btnAdd_Clicked,children:"Add"})]})}),Object(F.jsx)("div",{id:"divRemove",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inRemoveAmount",className:"form-control input-sm",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"btn btn-primary",onClick:this.btnRemove_Clicked,children:"Remove"})]})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),G=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"allowance",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new M.web3.eth.Contract(y.app.tokenAbi,n.poolInfo.ContractAddress),e.prev=1,e.next=4,a.methods.allowance(M.web3.eth.defaultAccount,t.liquidityMining.address).call();case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:return c=H.fromAtomicUnits(r,18).toString(),e.abrupt("return",parseFloat(c));case 11:return e.prev=11,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new M.web3.eth.Contract(y.app.tokenAbi,n.ContractAddress),e.prev=1,r=H.toAtomicUnitsHexPrefixed(1e8,18),e.next=5,a.methods.approve(t.liquidityMining.address,r).send({from:M.web3.eth.defaultAccount});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),J=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).btnTake_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:if(n=new M.web3.eth.Contract(y.app.miningAbi,t.liquidityMining.address),r=parseFloat(w()("#inTakeAmount").val()),(isNaN(r)||r<=0)&&(r=0),!(r>0)){e.next=13;break}return e.next=9,G.allowance(t,a.currentInfo);case 9:if(!(e.sent<r)){e.next=13;break}return e.next=13,G.approve(t,a.currentInfo);case 13:return q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Take",!1),c=!1,e.prev=18,o=H.toAtomicUnitsHexPrefixed(r,18),e.next=22,n.methods.withdrawAccruedYieldAndAdd(a.currentInfo.poolIndex,o).send({from:M.web3.eth.defaultAccount});case 22:i=e.sent,console.log("Transaction: ",i),c=i.status,e.next=31;break;case 27:e.prev=27,e.t0=e.catch(18),console.error(e.t0),c=!1;case 31:return e.next=33,a.validateUiState();case 33:q.clear(),c?q.showOk("Taking mining yield success!"):q.showError("Taking mining yield failed!"),w()("#inTakeAmount").val("");case 36:case"end":return e.stop()}}),e,null,[[18,27]])}))),a.btnAdd_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:if(n=new M.web3.eth.Contract(y.app.miningAbi,t.liquidityMining.address),r=parseFloat(w()("#inAddAmount").val()),!(isNaN(r)||r<=0)){e.next=8;break}return q.showWarn("Invalid amount entered"),e.abrupt("return");case 8:if(!(isNaN(a.currentInfo.unlocked)||a.currentInfo.unlocked<r)){e.next=11;break}return q.showWarn("Amount exceeds balance"),e.abrupt("return");case 11:return e.next=13,G.allowance(t,a.currentInfo);case 13:if(!(e.sent<r)){e.next=17;break}return e.next=17,G.approve(t,a.currentInfo);case 17:return q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Add",!1),c=w()("#selLockPeriod option:selected").val(),o=parseInt(c),i=!1,e.prev=24,s=H.toAtomicUnitsHexPrefixed(r,t.fmtaToken.decimals),e.next=28,n.methods.addPosition(s,o,a.currentInfo.poolIndex).send({from:M.web3.eth.defaultAccount});case 28:u=e.sent,console.log("Transaction: ",u),i=u.status,e.next=37;break;case 33:e.prev=33,e.t0=e.catch(24),console.error(e.t0),i=!1;case 37:return e.next=39,a.validateUiState();case 39:q.clear(),i?q.showOk("Creating stake success!"):q.showError("Creating stake failed!"),w()("#inAddAmount").val("");case 42:case"end":return e.stop()}}),e,null,[[24,33]])}))),a.btnRemove_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId)){e.next=3;break}return e.abrupt("return");case 3:return n=new M.web3.eth.Contract(y.app.miningAbi,t.liquidityMining.address),q.clear(),q.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Remove",!1),r=!1,e.prev=9,e.next=12,n.methods.removePosition(a.currentInfo.poolIndex).send({from:M.web3.eth.defaultAccount});case 12:c=e.sent,console.log("Transaction: ",c),r=c.status,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0),r=!1;case 21:return e.next=23,a.validateUiState();case 23:q.clear(),a.enableTab("Remove",!0),r?q.showOk("Removing position success!"):q.showError("Removing position failed!");case 26:case"end":return e.stop()}}),e,null,[[9,17]])}))),a.selPool_Changed=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.validateUiState();case 1:case"end":return e.stop()}}),e)}))),a.currentTab=null,a.currentInfo=null,a}return Object(s.a)(n,[{key:"getInfo",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n){var a,r,c,o,i,s,u,l,d,p,h,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P("#selPool"),e.prev=1,null===M.web3.eth.defaultAccount){e.next=30;break}return a=new M.web3.eth.Contract(y.app.miningAbi,t.liquidityMining.address),e.next=6,a.methods.poolInfo(n).call();case 6:return r=e.sent,c=new M.web3.eth.Contract(y.app.tokenAbi,r.ContractAddress),e.next=10,c.methods.balanceOf(M.web3.eth.defaultAccount).call();case 10:return(o=e.sent)||(o=0),i=H.fromAtomicUnits(o,18),e.next=15,a.methods.accountPosition(M.web3.eth.defaultAccount,n).call();case 15:return s=e.sent,u=0,u=s?s._lockedAmount:0,l=H.fromAtomicUnits(u,18),e.next=21,M.web3.eth.getBlockNumber();case 21:return d=e.sent,e.next=24,a.methods.showCurrentLockPeriods().call();case 24:p=e.sent,(h=s._unlockHeight-d)<0&&(h=0),b=null,b=0===h?"Unlocked":"Unlocks in ".concat(h," blocks"),this.currentInfo={unlocked:i,locked:l,remaining:h,status:b,poolIndex:n,poolInfo:r,lockPeriods:p};case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(1),console.error(e.t0),this.currentInfo=null;case 36:U("#selPool");case 37:case"end":return e.stop()}}),e,this,[[1,32]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"populatePoolDropDown",value:function(){w()("#selPool").empty(),w()("#selPool").append("<option>Select Pool</option>");var e=y.app.lpPools[M.chainId];e&&w.a.each(e,(function(e,t){w()("#selPool").append('<option value="'.concat(e,'">').concat(t,"</option>"))}))}},{key:"disableNavBar",value:function(){P("#btnTake"),P("#btnAdd"),P("#btnRemove"),P("#selPool")}},{key:"validateUiState",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId),q.clear(),t){e.next=11;break}return this.disableNavBar(),this.hideAllTabs(),w()("#lblUnlocked").text("0.00"),w()("#lblLocked").text("0.00"),w()("#lblStatus").text("N/A"),w()("#inTakeAmount").attr("placeholder","Enter amount"),w()("#inAddAmount").attr("placeholder","Enter amount"),e.abrupt("return");case 11:if(U("#selPool"),n=w()("#selPool option:selected").val(),a=parseInt(n),!isNaN(a)){e.next=25;break}return P("#btnTake"),P("#btnAdd"),P("#btnRemove"),this.hideAllTabs(),w()("#lblUnlocked").text("0.00"),w()("#lblLocked").text("0.00"),w()("#lblStatus").text("N/A"),w()("#inTakeAmount").attr("placeholder","Add to position"),w()("#inAddAmount").attr("placeholder","Enter amount"),e.abrupt("return");case 25:return e.next=27,this.getInfo(t,a);case 27:r=this.currentInfo,w()("#selLockPeriod").empty(),w()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[0],'">').concat(r.lockPeriods[0]," days</option>")),w()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[1],'">').concat(r.lockPeriods[1]," days</option>")),w()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[2],'">').concat(r.lockPeriods[2]," days</option>")),c=new Intl.NumberFormat("us-us",{style:"decimal",useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:10}),w()("#lblUnlocked").text(c.format(r.unlocked)),w()("#lblLocked").text(c.format(r.locked)),w()("#lblStatus").text(r.status),w()("#inTakeAmount").attr("placeholder","Add to position (max ".concat(r.unlocked,")")),w()("#inAddAmount").attr("placeholder","Enter amount (max ".concat(r.unlocked,")")),this.enableTab("Take",0===r.remaining&&r.locked>0),this.enableTab("Add",r.unlocked>0&&0===r.locked),this.enableTab("Remove",0===r.remaining&&r.locked>0);case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enableTab",value:function(e,t){t?(U("#btn".concat(e)),U("#div".concat(e))):(P("#btn".concat(e)),P("#div".concat(e)))}},{key:"hideAllTabs",value:function(){D("#divTake"),D("#divAdd"),D("#divRemove"),this.currentTab=null}},{key:"showTab",value:function(e){e!==this.currentTab&&(D("#divTake"),D("#divAdd"),D("#divRemove"),W(e),this.currentTab=e)}},{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),R.populateMineable(),this.hideAllTabs(),M.hasListener("mining")||((t=new j.a).on("connect",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("chainChanged",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),M.addListener("staking",t)),M.isConnected()&&this.populatePoolDropDown(),e.next=7,this.validateUiState();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M.removeListener("mining")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"LP Mining"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"d-flex p-0",children:[Object(F.jsx)("div",{className:"w-100 justify-content-start",children:Object(F.jsxs)(p.a,{collapseOnSelect:!0,expand:"sm",className:"navbar navbar-expand-sm pt-0",children:[Object(F.jsx)(p.a.Toggle,{}),Object(F.jsx)(p.a.Collapse,{children:Object(F.jsxs)(h.a,{children:[Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start ps-0",style:{outline:"none",border:"none",boxShadow:"none"},id:"btnTake",onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divTake");case 2:case"end":return t.stop()}}),t)}))),children:"Take"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnAdd",style:{outline:"none",border:"none",boxShadow:"none"},onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divAdd");case 2:case"end":return t.stop()}}),t)}))),children:"Add"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnRemove",style:{outline:"none",border:"none",boxShadow:"none"},onClick:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.clear(),e.showTab("#divRemove");case 2:case"end":return t.stop()}}),t)}))),children:"Remove"})]})})]})}),Object(F.jsx)("div",{className:"justify-content-end",children:Object(F.jsx)("select",{id:"selPool",className:"form-select",style:{width:"auto"},onChange:this.selPool_Changed})})]}),Object(F.jsxs)("div",{className:"d-flex pb-3",children:[Object(F.jsxs)("div",{className:"text-end",children:[Object(F.jsx)("div",{children:"Unlocked:\xa0"}),Object(F.jsx)("div",{children:"Locked:\xa0"}),Object(F.jsx)("div",{children:"Status:\xa0"})]}),Object(F.jsxs)("div",{className:"text-start",children:[Object(F.jsx)("div",{id:"lblUnlocked",children:"0"}),Object(F.jsx)("div",{id:"lblLocked",children:"0"}),Object(F.jsx)("div",{id:"lblStatus",children:"N/A"})]})]}),Object(F.jsx)("div",{id:"divTake",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inTakeAmount",className:"form-control input-sm",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"btn btn-primary",onClick:this.btnTake_Clicked,children:"Take"})]})}),Object(F.jsx)("div",{id:"divAdd",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inAddAmount",className:"form-control input-sm",placeholder:"Enter amount"}),Object(F.jsx)("select",{id:"selLockPeriod",className:"form-select",style:{width:"auto"}}),Object(F.jsx)("button",{className:"btn btn-primary",onClick:this.btnAdd_Clicked,children:"Add"})]})}),Object(F.jsx)("div",{id:"divRemove",children:Object(F.jsx)("div",{className:"input-group mb-3",children:Object(F.jsx)("button",{className:"btn btn-primary w-100",onClick:this.btnRemove_Clicked,children:"Remove"})})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),V=function(){function e(){Object(i.a)(this,e),this.cancelRequested=!1}return Object(s.a)(e,[{key:"cancel",value:function(){this.cancelRequested=!0}}]),e}(),K=function(){function e(t,n){Object(i.a)(this,e),this.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.teleport=t,this.emitter=new j.a,this.cancelRequested=!1,this.cancellationToken=n}return Object(s.a)(e,[{key:"on",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emitter.on(t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancellationToken.cancelRequested){e.next=4;break}return console.warn("Energize task cancelled by token"),e.abrupt("return");case 4:return console.log("Attempting energize"),e.next=7,this.energize();case 7:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.delay(1e4);case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"energize",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.teleport.transactionData,n=this.teleport.blockNumber,a=this.teleport.destinationToken.confs,e.next=5,this.getApproval(this.teleport.signature,n,t,a);case 5:if(!((r=e.sent).length<a)){e.next=18;break}if(!this.cancellationToken.cancelRequested){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(r.length>0)){e.next=16;break}if(0===r[0].code){e.next=14;break}if(this.emitter.emit("error",r[0].code,r[0].data.s),100===r[0].code){e.next=14;break}return e.abrupt("return",!0);case 14:e.next=17;break;case 16:this.emitter.emit("error",-1,"Not Approved");case 17:return e.abrupt("return",!1);case 18:return c=[],w.a.each(r,(function(){c.push("0x".concat(this.data.s))})),this.emitter.emit("ok",c),e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getApproval",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n,a,r){var c,o,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.toBigIntHex(n);case 2:c=e.sent,o=[],i=1;case 5:if(!(i<=y.app.serverCount)){e.next=23;break}return e.next=8,this.getServerApproval(i,c,a,t);case 8:if(null!=(s=e.sent)){e.next=12;break}return console.log("No response"),e.abrupt("continue",20);case 12:if(0===s.code){e.next=16;break}return console.log("Server responded with error",s.code),o.push(s),e.abrupt("return",o);case 16:if(console.log("Server responded OK"),o.push(s),!(o.length>=r)){e.next=20;break}return e.abrupt("break",23);case 20:i++,e.next=5;break;case 23:return e.abrupt("return",o);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getServerApproval",value:function(){var e=Object(k.a)(f.a.mark((function e(t,n,a,r){var c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://cp".concat(t,".").concat(y.app.serverDomain,"/authorize/?n=").concat(y.app.cpNet,"&d=").concat(a,"&s=").concat(r,"&b=").concat(n),console.log("Contacting server:",t),e.next=4,w.a.ajax({url:c,method:"GET",dataType:"json",cache:"false"});case 4:return o=e.sent,console.log(o),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()}]),e}(),X=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).completedTeleport=null,a.cancellationToken=new V,a}return Object(s.a)(n,[{key:"populateTokenDropDown",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w()("#sourceToken").empty(),w()("#destination").empty(),w()("#sourceToken").append(w()("<option />").text("Select token")),w()("#destination").append(w()("<option />").text("Select destination")),e.next=6,this.validateUiState();case 6:if(t=R.getFromMap(M.chainId)){e.next=9;break}return e.abrupt("return");case 9:w()("#sourceToken").append(w()("<option />").text(t.fmtaToken.ticker)),w.a.each(t.tokens,(function(){this.bridgeAddress&&w()("#sourceToken").append(w()("<option />").text(this.ticker))}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSourceTokenFromDropdown",value:function(){var e=R.getFromMap(M.chainId);if(e){var t,n=w()("#sourceToken option:selected").text();return n===e.fmtaToken.ticker?t=e.fmtaToken:w.a.each(e.tokens,(function(){if(this.ticker===n)return t=this,!1})),t}}},{key:"getDestinationNetworkFromDropDown",value:function(){var e,t=w()("#destination option:selected").text();return w.a.each(y.network,(function(){if(this.network===t)return e=this,!1})),e}},{key:"getDestinationTokenFromDropDown",value:function(){var e,t=this.getSourceTokenFromDropdown(),n=this.getDestinationNetworkFromDropDown();return t.ticker===n.fmtaToken.ticker?e=n.fmtaToken:w.a.each(n.tokens,(function(){if(this.ticker===t.ticker)return e=this,!1})),e}},{key:"validateUiState",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.getFromMap(M.chainId),q.clear(),P("#button"),e.next=5,this.getTokenBalance();case 5:if(n=e.sent,t){e.next=9;break}return P("#form"),e.abrupt("return");case 9:if(t.chainId===M.chainId){e.next=11;break}return e.abrupt("return");case 11:if(!(w()("#destination").prop("selectedIndex")-1<0)){e.next=14;break}return e.abrupt("return");case 14:if(a=parseFloat(w()("#amount").val()),!(isNaN(a)||a<=0||isNaN(n)||n<a)){e.next=19;break}return q.showWarn("Invalid amount entered"),P("#button"),e.abrupt("return");case 19:U("#button");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTokenBalance",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R.getFromMap(M.chainId),n=this.getSourceTokenFromDropdown(),t&&n){e.next=5;break}return w()("#amount").attr("placeholder","Enter amount"),e.abrupt("return");case 5:if(M.chainId!==t.chainId||!M.web3.eth.defaultAccount){e.next=14;break}return a=new M.web3.eth.Contract(y.app.tokenAbi,n.tokenAddress),e.next=9,a.methods.balanceOf(M.web3.eth.defaultAccount).call();case 9:return(r=e.sent)||(r=0),c=H.fromAtomicUnits(r,n.decimals).toString(),w()("#amount").attr("placeholder","Enter amount (max ".concat(c,")")),e.abrupt("return",parseFloat(c));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNonce",value:function(){var e=M.web3.eth.defaultAccount.toString().slice(-40),t=H.to32bitHex(Date.now()),n=new Uint8Array(8);return window.crypto.getRandomValues(n),t+e+H.bin2hex(n)}},{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),M.hasListener("teleport")||((t=new j.a).on("connect",(function(){U("#form")})),t.on("disconnect",(function(){P("#form"),q.clear(),n.cancellationToken.cancel()})),t.on("accountsChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&0!==t.length){e.next=3;break}return P("#form"),e.abrupt("return");case 3:return U("#form"),e.next=6,n.validateUiState();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),e.next=3,n.populateTokenDropDown();case 3:if(null!=n.completedTeleport){e.next=7;break}return e.next=6,n.validateUiState();case 6:return e.abrupt("return");case 7:if(a=R.getFromMap(M.chainId),n.completedTeleport.destination.chainId===M.chainId){e.next=11;break}return q.showWarn("Switch to the "+a.network+" network to energize"),e.abrupt("return");case 11:return q.showWarn("Waiting for energize. Do not close this page"),n.cancellationToken=new V,(r=new K(n.completedTeleport,n.cancellationToken)).on("error",(function(e,t){100!==e&&(q.hideWarn(),U("#form")),q.showError("Error "+e+": "+t)})),r.on("ok",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),q.showWarn("Energized confirmed. Processing transaction..."),e.prev=2,n=new M.web3.eth.Contract(y.app.bridgeAbi,r.teleport.destinationToken.bridgeAddress),e.next=6,n.methods.deposit(r.teleport.signature,t,r.teleport.transactionData).send({from:M.web3.eth.defaultAccount});case 6:a=e.sent,console.log("Transaction: ",a),U("#form"),q.showOk("Energize success!"),e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(2),q.clear(),q.showError("Energize faile!"),U("#form"),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),e.next=18,r.start();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M.addListener("teleport",t)),M.isConnected()?U("#form"):P("#form"),R.populateAll(),e.next=6,this.populateTokenDropDown();case 6:w()("#sourceToken").on("change",Object(k.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.getFromMap(M.chainId),a=n.getSourceTokenFromDropdown(),w()("#destination").empty(),w()("#destination").append(w()("<option />").text("Select destination")),e.next=6,n.validateUiState();case 6:if(a){e.next=8;break}return e.abrupt("return");case 8:w.a.each(y.network,(function(){var e=this,n=this.tokens;e!==t&&(a.ticker===e.fmtaToken.ticker?w()("#destination").append(w()("<option />").text(e.network)):w.a.each(n,(function(){this.ticker===a.ticker&&w()("#destination").append(w()("<option />").text(e.network))})))}));case 9:case"end":return e.stop()}}),e)})))),w()("#destination").on("change",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),w()("#amount").on("change",Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),w()("#button").on("click",Object(k.a)(f.a.mark((function e(){var t,a,r,c,o,i,s,u,l,d,p,h,b,m,k,v;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),P("#form"),t=R.getFromMap(M.chainId),a=n.getSourceTokenFromDropdown(),r=n.getDestinationNetworkFromDropDown(),c=n.getDestinationTokenFromDropDown(),o=H.toAtomicUnitsHex(w()("#amount").val(),a.decimals),i=H.to32bitHex(t.id)+H.to32bitHex(a.id),s=H.to32bitHex(r.id)+H.to32bitHex(c.id),u=i+s,l=n.createNonce(),d=M.web3.eth.defaultAccount.toString().slice(-40).padStart(64,"0"),p="0x"+o+u+l+d,q.showWarn("Requesting signature..."),e.prev=14,e.next=17,M.web3.eth.personal.sign(p,M.web3.eth.defaultAccount);case 17:h=e.sent,e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(14),q.hideWarn(),q.showError("Transaction signing failed"),U("#form"),e.abrupt("return");case 26:return e.prev=26,q.showWarn("Processing teleport. Please wait..."),b=new M.web3.eth.Contract(y.app.bridgeAbi,a.bridgeAddress),e.next=31,b.methods.withdraw(h,p).send({from:M.web3.eth.defaultAccount});case 31:if(m=e.sent,console.log("Withdraw: ",m),k=m.transactionHash,v=m.blockNumber,n.completedTeleport={txHash:k,blockNumber:v,transactionData:p,source:t,destination:r,destinationToken:c,signature:h},q.clear(),q.showOk("Teleport completed."),!M.isMetamask){e.next=42;break}q.showWarn("Switch to "+r.network+" to energize"),e.next=46;break;case 42:if(!M.isWalletConnect){e.next=46;break}return q.showWarn("Requesting netework switch to "+r.network+" to energize"),e.next=46,M.switchNetwork(r.chainId);case 46:e.next=54;break;case 48:e.prev=48,e.t1=e.catch(26),q.clear(),q.showError("Teleport transaction failed"),console.error(e.t1),U("#form");case 54:return e.next=56,n.getTokenBalance();case 56:case"end":return e.stop()}}),e,null,[[14,20],[26,48]])}))));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M.removeListener("teleport"),this.cancellationToken.cancel()}},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"Teleport"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"sourceToken",className:"form-control form-select"}),Object(F.jsx)("input",{type:"number",id:"amount",className:"form-control input-sm numeric-input",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{className:"mb-3",children:Object(F.jsx)("select",{id:"destination",className:"form-control form-select"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary w-100",children:"Teleport!"})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),Q=function(){function e(t){Object(i.a)(this,e),this.wrap=t}return Object(s.a)(e,[{key:"getTokenBalance",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getSelectedData()){e.next=4;break}return w()("#amount").attr("placeholder","Enter amount"),e.abrupt("return");case 4:if(n=t.network,a=t.token,M.chainId!==n.chainId||!M.web3.eth.defaultAccount){e.next=15;break}return r=this.wrap?new M.web3.eth.Contract(y.app.tokenAbi,a.tokenAddress):new M.web3.eth.Contract(y.app.tokenAbi,a.wrappedTokenAddress),e.next=10,r.methods.balanceOf(M.web3.eth.defaultAccount).call();case 10:return(c=e.sent)||(c=0),o=H.fromAtomicUnits(c,a.decimals).toString(),w()("#amount").attr("placeholder","Enter amount (max ".concat(o,")")),e.abrupt("return",parseFloat(o));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedData",value:function(){var e=R.getFromMap(M.chainId);if(e){var t=w()("#token").prop("selectedIndex")-1;if(!(t<0))return{network:e,token:e.tokens[t]}}}},{key:"populateTokenDropDown",value:function(){w()("#token").empty(),w()("#token").append(w()("<option />").text("Select token"));var e=R.get().chainId;if(isNaN(e))P("#form");else{U("#form");var t=R.getFromMap(e);t&&(this.wrap?w.a.each(t.tokens,(function(){w()("#token").append(w()("<option />").text(this.ticker))})):w.a.each(t.tokens,(function(){w()("#token").append(w()("<option />").text(this.wrappedTicker))})))}}},{key:"registerWalletListeners",value:function(e){var t=this;if(!M.hasListener(e)){var n=new j.a;n.on("connect",(function(e){U("#form")})),n.on("disconnect",(function(e){P("#form"),q.clear()})),n.on("accountsChanged",function(){var e=Object(k.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&0!==t.length){e.next=3;break}return P("#form"),e.abrupt("return");case 3:U("#form");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("chainChanged",function(){var e=Object(k.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.populateTokenDropDown();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M.addListener(e,n)}}}]),e}(),Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).btnWrap_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i,s,u,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.common.getSelectedData(),n=parseFloat(w()("#amount").val()),e.next=4,a.common.getTokenBalance();case 4:if(r=e.sent,!(isNaN(n)||n<=0)){e.next=8;break}return q.showWarn("Invalid amount entered"),e.abrupt("return");case 8:if(!(isNaN(r)||r<n)){e.next=11;break}return q.showWarn("Amount exceeds balance"),e.abrupt("return");case 11:return c=new M.web3.eth.Contract(y.app.tokenAbi,t.token.tokenAddress),o=new M.web3.eth.Contract(y.app.tokenAbi,t.token.wrappedTokenAddress),q.clear(),q.showWarn("Processing. Please wait..."),P("#form"),i=!1,e.prev=17,e.next=20,a.getTokenAllowance();case 20:if(!(e.sent<n)){e.next=30;break}return s=H.toAtomicUnitsHexPrefixed(1e8,t.token.decimals),e.next=25,c.methods.approve(t.token.wrappedTokenAddress,s).send({from:M.web3.eth.defaultAccount});case 25:u=e.sent,console.log("Transaction: ",u),i=u.status,e.next=31;break;case 30:i=!0;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(17),console.error(e.t0),i=!1;case 37:if(!i){e.next=51;break}return e.prev=38,l=H.toAtomicUnitsHexPrefixed(n,t.token.decimals),e.next=42,o.methods.wrap(l).send({from:M.web3.eth.defaultAccount});case 42:d=e.sent,console.log("Transaction: ",d),i=d.status,e.next=51;break;case 47:e.prev=47,e.t1=e.catch(38),console.error(e.t1),i=!1;case 51:return e.next=53,a.common.getTokenBalance();case 53:U("#form"),q.clear(),i?q.showOk("Wrap success!"):q.showError("Wrap failed!"),w()("#amount").val("");case 57:case"end":return e.stop()}}),e,null,[[17,33],[38,47]])}))),a.common=new Q(!0),a}return Object(s.a)(n,[{key:"getTokenAllowance",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,a,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.common.getSelectedData()){e.next=3;break}return e.abrupt("return",0);case 3:if(n=t.network,a=t.token,M.chainId!==n.chainId||!M.web3.eth.defaultAccount){e.next=14;break}return r=new M.web3.eth.Contract(y.app.tokenAbi,a.tokenAddress),e.next=9,r.methods.allowance(M.web3.eth.defaultAccount,t.token.wrappedTokenAddress).call();case 9:if(c=e.sent){e.next=12;break}return e.abrupt("return",0);case 12:return o=H.fromAtomicUnits(c,a.decimals).toString(),e.abrupt("return",parseFloat(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.clear(),this.common.registerWalletListeners("wrap"),M.isConnected()?U("#form"):P("#form"),R.populateWrappable(),this.common.populateTokenDropDown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M.removeListener("wrap")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"Wrap"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"token",className:"form-control form-select",onChange:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.common.getTokenBalance();case 2:case"end":return t.stop()}}),t)})))}),Object(F.jsx)("input",{type:"number",id:"amount",className:"form-control input-sm",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary w-100",onClick:this.btnWrap_Clicked,children:"Wrap!"})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).btnUnwrap_Clicked=Object(k.a)(f.a.mark((function e(){var t,n,r,c,o,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.common.getSelectedData(),n=parseFloat(w()("#amount").val()),e.next=4,a.common.getTokenBalance();case 4:if(r=e.sent,!(isNaN(n)||n<=0)){e.next=8;break}return q.showWarn("Invalid amount entered"),e.abrupt("return");case 8:if(!(isNaN(r)||r<n)){e.next=11;break}return q.showWarn("Amount exceeds balance"),e.abrupt("return");case 11:return c=new M.web3.eth.Contract(y.app.tokenAbi,t.token.wrappedTokenAddress),q.clear(),q.showWarn("Processing. Please wait..."),P("#form"),o=!1,e.prev=16,i=H.toAtomicUnitsHexPrefixed(n,t.token.decimals),e.next=20,c.methods.unwrap(i).send({from:M.web3.eth.defaultAccount});case 20:s=e.sent,console.log("Transaction: ",s),o=s.status,e.next=29;break;case 25:e.prev=25,e.t0=e.catch(16),console.error(e.t0),o=!1;case 29:return e.next=31,a.common.getTokenBalance();case 31:q.clear(),U("#form"),o?q.showOk("Unwrap success!"):q.showError("Unwrap failed!"),w()("#amount").val("");case 35:case"end":return e.stop()}}),e,null,[[16,25]])}))),a.common=new Q(!1),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.clear(),this.common.registerWalletListeners("unwrap"),M.isConnected()?U("#form"):P("#form"),R.populateWrappable(),this.common.populateTokenDropDown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M.removeListener("unwrap")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"Unwrap"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"token",className:"form-control form-select",onChange:Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.common.getTokenBalance();case 2:case"end":return t.stop()}}),t)})))}),Object(F.jsx)("input",{type:"number",id:"amount",className:"form-control input-sm",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary w-100",onClick:this.btnUnwrap_Clicked,children:"Unwrap!"})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).recoveredTeleport=null,a.cancellationToken=new V,a}return Object(s.a)(n,[{key:"validateUiState",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("#form"),P("#button"),q.clear(),!this.recoveredTeleport){e.next=7;break}M.chainId===this.recoveredTeleport.destination.chainId?(q.showOk("Teleport found"),P("#selectors"),U("#button")):M.isMetamask?q.showWarn("Switch MetaMask to the ".concat(this.recoveredTeleport.destination.network," network to energize")):M.isWalletConnect&&(q.showWarn("Sending request to change to the ".concat(this.recoveredTeleport.destination.network," network to energize")),M.switchNetwork(this.recoveredTeleport.destination.chainId)),e.next=24;break;case 7:if(t=w()("#hash").val()){e.next=10;break}return e.abrupt("return");case 10:if(!(t.length<66)){e.next=13;break}return q.showError("Invalid transaction hash"),e.abrupt("return");case 13:return e.next=15,this.recoverTeleport(t);case 15:if(this.recoveredTeleport=e.sent,console.log(this.recoveredTeleport),this.recoveredTeleport){e.next=20;break}return q.showError("Teleport not found"),e.abrupt("return");case 20:q.showOk("Teleport found"),P("#selectors"),U("#button"),M.isMetamask?q.showWarn("Switch MetaMask to the ".concat(this.recoveredTeleport.destination.network," network to energize")):M.isWalletConnect&&(q.showWarn("Sending request to change to the ".concat(this.recoveredTeleport.destination.network," network to energize")),M.switchNetwork(this.recoveredTeleport.destination.chainId));case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recoverTeleport",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,a,r,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting recovery:",t),e.next=3,M.web3.eth.getTransactionReceipt(t);case 3:if(n=e.sent){e.next=7;break}return console.log("Receipt not found"),e.abrupt("return");case 7:if(a=n.blockNumber,w.a.each(n.logs,Object(k.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.topics[0]!==y.app.withdrawEventHash){e.next=7;break}return r=this.data.slice(130,354),t=parseInt(r.slice(64,72),16),n=parseInt(r.slice(80,88),16),a=parseInt(r.slice(88,96),16),w.a.each(y.network,(function(){this.id===t&&(c=this),this.id===n&&(o=this,0===a?i=this.fmtaToken:w.a.each(this.tokens,(function(){this.id===a&&(i=this)})))})),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})))),c&&o&&r&&0!==r.length&&i){e.next=11;break}return e.abrupt("return");case 11:return r="0x"+r,e.abrupt("return",{txHash:t,blockNumber:a,transactionData:r,source:c,destination:o,destinationToken:i});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;if(q.clear(),!M.hasListener("energize")){var t=new j.a;t.on("connect",Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),t.on("disconnect",(function(){P("#form"),q.clear(),e.cancellationToken.cancel()})),t.on("accountsChanged",function(){var t=Object(k.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n&&0!==n.length){t.next=3;break}return P("#form"),t.abrupt("return");case 3:return t.next=5,e.validateUiState();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.on("chainChanged",Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),M.addListener("energize",t)}M.isConnected()?U("#form"):P("#form"),R.populateAll(),w()("#hash").on("change",Object(k.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),w()("#button").on("click",Object(k.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q.clear(),P("#form"),q.showWarn("Requesting signature..."),console.log("Transaction Data:",e.recoveredTeleport.transactionData),t.prev=4,t.next=7,M.web3.eth.personal.sign(e.recoveredTeleport.transactionData,M.web3.eth.defaultAccount);case 7:n=t.sent,e.recoveredTeleport.signature=n,t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(4),q.clear(),U("#form"),q.showError("Transaction signing failed"),t.abrupt("return");case 17:return e.cancellationToken=new V,(a=new K(e.recoveredTeleport,e.cancellationToken)).on("error",(function(e,t){100!==e&&(q.hideWarn(),U("#form")),q.showError("Error ".concat(e,": ").concat(t))})),a.on("ok",function(){var e=Object(k.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.clear(),console.log(a.teleport),q.showWarn("Energize confirmed. Processing transaction..."),e.prev=3,n=new M.web3.eth.Contract(y.app.bridgeAbi,a.teleport.destinationToken.bridgeAddress),e.next=7,n.methods.deposit(a.teleport.signature,t,a.teleport.transactionData).send({from:M.web3.eth.defaultAccount});case 7:r=e.sent,console.log("Transaction:",r),U("#form"),q.clear(),q.showOk("Energize Success!"),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(3),q.clear(),q.showError("Transaction failed!"),U("#form"),e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()),q.showWarn("Verifying teleport..."),t.next=24,a.start();case 24:case"end":return t.stop()}}),t,null,[[4,11]])}))))}},{key:"componentWillUnmount",value:function(){M.removeListener("energize"),this.cancellationToken.cancel()}},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-sm",children:Object(F.jsx)("div",{children:Object(F.jsxs)("form",{className:"card",children:[Object(F.jsx)("div",{className:"card-header",children:"Energize"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsx)("div",{id:"selectors",children:Object(F.jsx)("div",{className:"mb-3",children:Object(F.jsx)("input",{id:"hash",className:"form-control input-sm",placeholder:"Enter TX hash"})})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary w-100",children:"Energize!"})})]}),Object(F.jsx)(z,{})]})]})})})})})}}]),n}(r.a.Component),te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(L,{}),Object(F.jsxs)(d.g,{children:[Object(F.jsx)(d.d,{exact:!0,path:"/",component:B}),Object(F.jsx)(d.d,{path:"/staking",component:Y}),Object(F.jsx)(d.d,{path:"/mining",component:J}),Object(F.jsx)(d.d,{path:"/teleport",component:X}),Object(F.jsx)(d.d,{path:"/wrap",component:Z}),Object(F.jsx)(d.d,{path:"/unwrap",component:$}),Object(F.jsx)(d.d,{path:"/energize",component:ee})]})]})}}]),n}(r.a.Component),ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,815)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},ae=n(107);o.a.render(Object(F.jsx)(ae.HashRouter,{children:Object(F.jsx)(te,{})}),document.getElementById("root")),ne()}},[[804,1,2]]]);
//# sourceMappingURL=main.4734b7b2.chunk.js.map