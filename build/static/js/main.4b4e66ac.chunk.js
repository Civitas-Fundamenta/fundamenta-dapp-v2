(this["webpackJsonpciviport-web-react"]=this["webpackJsonpciviport-web-react"]||[]).push([[0],{350:function(e,t,n){},358:function(e,t){},401:function(e,t){},403:function(e,t){},427:function(e,t){},429:function(e,t){},441:function(e,t){},442:function(e,t){},464:function(e,t){},471:function(e,t){},473:function(e,t){},578:function(e,t){},580:function(e,t){},589:function(e,t){},606:function(e,t){},607:function(e,t){},677:function(e,t){},678:function(e,t){},770:function(e,t,n){},771:function(e,t,n){},772:function(e,t,n){},773:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(68),o=n.n(c),s=(n(350),n(0)),i=n.n(s),u=n(3),l=n(6),d=n(7),p=n(11),b=n(10),h=n(29),m=(n(352),n(20)),f=n.n(m),v=n(4),k=n.n(v),x=n(780),w=n(781),j=n(73),y=n(145),g=n(332),O=Object(g.a)("_fetchNetworkConfigLock"),T=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"getFromMap",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.networkMap.length){e.next=3;break}return e.next=3,this.fetchNetworkConfig();case 3:if(0!==t){e.next=5;break}return e.abrupt("return",null);case 5:return n=null,k.a.each(this.networkMap,(function(e,a){if(a.chainId===t)return n=a,!1})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFmtaToken",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,null!=t){e.next=3;break}return e.abrupt("return");case 3:return k.a.each(t.tokens,(function(e,t){if(0===t.id)return n=t,!1})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,null!=t){e.next=3;break}return e.abrupt("return");case 3:return k.a.each(t.tokens,(function(e,t){if(t.id===n)return a=t,!1})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchNetworkConfig",value:function(){var t=Object(u.a)(i.a.mark((function t(){var n,a,r=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(y.a)(e,O)[O]){t.next=2;break}return t.abrupt("return");case 2:if(Object(y.a)(e,O)[O]=!0,this.network){t.next=15;break}return console.log("Fetching network config"),t.next=7,k.a.ajax({url:"https://".concat(this.app.resourceUrl,"/config/?x=").concat(this.app.net),dataType:"json",cache:"false"});case 7:return this.network=t.sent,console.log("Fetching network token config"),t.next=11,k.a.ajax({url:"https://".concat(this.app.resourceUrl,"/config/?x=").concat(this.app.net,".tokens"),dataType:"json",cache:"false"});case 11:n=t.sent,a=new Map(Object.entries(n)),k.a.each(this.network,(function(){e.networkMap.push(this)})),a.forEach(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getFromMap(parseInt(n));case 2:for(a=e.sent,c=0;c<t.length;c++)a.tokens.push(t[c]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 15:return Object(y.a)(e,O)[O]=!1,t.abrupt("return",this.network);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}();function N(e){k()(e).addClass("d-none")}function A(e){k()(e).addClass("disable"),k()(e).prop("disabled",!0),k()(e).find("*").addClass("disable"),k()(e).find("*").prop("disabled",!0)}function C(e){k()(e).removeClass("d-none")}function _(e){k()(e).removeClass("disable"),k()(e).prop("disabled",!1),k()(e).find("*").removeClass("disable"),k()(e).find("*").prop("disabled",!1)}T.network=null,T.networkMap=[],Object.defineProperty(T,O,{writable:!0,value:!1}),T.app={net:"mainnet",serverCount:10,serverDomain:"civiport.online",confTime:12,withdrawEventHash:"0xc1a6280eefe33f118e2ab28074ac0a44f953d5e5101c755bf744881a5a812434",resourceUrl:"cp3.civiport.online",holder0:"0xA4dda4EDfB34222063c77DFE2F50B30f5DF39870",holder1:"0xa0b72536ba6496aec721400b5f0e1e65caf4be77",holder2:"0x22a68bb25bf760d954c7e67ff06dc85297356068",bridgeAbi:[{inputs:[{internalType:"bytes[]",name:"serverSignatures",type:"bytes[]"},{internalType:"bytes",name:"transactionData",type:"bytes"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"destNetwork",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"queryToken",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bool",name:"isWrappedToken",type:"bool"},{internalType:"uint256",name:"numSigners",type:"uint256"},{internalType:"bool",name:"canWithdraw",type:"bool"},{internalType:"bool",name:"canDeposit",type:"bool"},{internalType:"contract TokenInterface",name:"token",type:"address"}],internalType:"struct TokenInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"}],tokenAbi:[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"unwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"wrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],stakeAbi:[{inputs:[{internalType:"uint256",name:"_stake",type:"uint256"}],name:"createStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakeholder",type:"address"}],name:"stakeOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_stake",type:"uint256"}],name:"removeStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"compoundRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardsAccrued",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakeCalc",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],miningAbi:[{inputs:[],name:"showCurrentLockPeriods",outputs:[{internalType:"uint256",name:"_lockPeriod0",type:"uint256"},{internalType:"uint256",name:"_lockPeriod1",type:"uint256"},{internalType:"uint256",name:"_lockPeriod2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contract IERC20",name:"ContractAddress",type:"address"},{internalType:"uint256",name:"TotalRewardsPaidByPool",type:"uint256"},{internalType:"uint256",name:"TotalLPTokensLocked",type:"uint256"},{internalType:"uint256",name:"PoolBonus",type:"uint256"},{internalType:"uint256",name:"lockPeriod0BasisPoint",type:"uint256"},{internalType:"uint256",name:"lockPeriod1BasisPoint",type:"uint256"},{internalType:"uint256",name:"lockPeriod2BasisPoint",type:"uint256"},{internalType:"uint256",name:"compYield0",type:"uint256"},{internalType:"uint256",name:"compYield1",type:"uint256"},{internalType:"uint256",name:"compYield2",type:"uint256"},{internalType:"uint256",name:"maxPoolBP",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"},{internalType:"uint256",name:"_pid",type:"uint256"}],name:"accountPosition",outputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"uint256",name:"_unlockHeight",type:"uint256"},{internalType:"uint256",name:"_lockedAmount",type:"uint256"},{internalType:"uint256",name:"_lockPeriodInDays",type:"uint256"},{internalType:"uint256",name:"_userDPY",type:"uint256"},{internalType:"contract IERC20",name:"_lpTokenAddress",type:"address"},{internalType:"uint256",name:"_totalRewardsPaidFromPool",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_lpTokenAmount",type:"uint256"},{internalType:"uint256",name:"_lockPeriod",type:"uint256"},{internalType:"uint256",name:"_pid",type:"uint256"}],name:"addPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"removePosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_lpTokenAmount",type:"uint256"}],name:"withdrawAccruedYieldAndAdd",outputs:[],stateMutability:"nonpayable",type:"function"}],minterAbi:[{inputs:[],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hasMinted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"fmtaNeeded",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],lpPools:{1:{0:"FMTA/ETH",1:"FMTA/USDC"},4:{0:"FMTA/WETH"},56:{0:"FMTA/BNB"}},nftMinters:{1:"0xDab6DCa3AF0c4427F2b39B9106D4D316d5e48e72",56:"0xDab6DCa3AF0c4427F2b39B9106D4D316d5e48e72",137:"0xDab6DCa3AF0c4427F2b39B9106D4D316d5e48e72",80001:"0x6C27123bb4B8B51393f0314a24d69E4bfCD3017c"}};var S=n(54),I=n(343),M=n(69),D=n.n(M),P=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"getNetworkName",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(this.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return","Unknown");case 5:return e.abrupt("return",t.name);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addListener",value:function(e,t){this.emitters.has(e)||this.emitters.set(e,t)}},{key:"removeListener",value:function(e){this.emitters.has(e)&&this.emitters.delete(e)}},{key:"hasListener",value:function(e){return this.emitters.has(e)}},{key:"isConnected",value:function(){return null!=this.web3}},{key:"isMetamaskAvailable",value:function(){return window.ethereum}},{key:"walletConnect",value:function(){var t=Object(u.a)(i.a.mark((function t(){var n,a,r,c,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConnected()){t.next=2;break}return t.abrupt("return");case 2:return this.isMetamask=!1,this.isWalletConnect=!0,console.log("Using WalletConnect provider"),this.provider=new I.a({rpc:{1:this.rpcUrls.get(1),4:this.rpcUrls.get(4),5:this.rpcUrls.get(5),25:this.rpcUrls.get(25),56:this.rpcUrls.get(56),100:this.rpcUrls.get(100),137:this.rpcUrls.get(137),250:this.rpcUrls.get(250),43114:this.rpcUrls.get(43114),80001:this.rpcUrls.get(8001)},chainId:"testnet"===T.app.net?4:1}),this.web3=new D.a(this.provider),this._registerProvider(),this.provider.wc.on("wc_sessionUpdate",(function(t,n){if(t)return o.chainId=0,void console.warn("wc_sessionUpdate",t);if(n){o.chainId=n.params[0].chainId,console.log("chainChanged",o.chainId);var a,r=Object(S.a)(e.emitters.values());try{for(r.s();!(a=r.n()).done;){a.value.emit("chainChanged",o.chainId)}}catch(c){r.e(c)}finally{r.f()}}})),t.prev=9,t.next=12,this.provider.enable();case 12:t.next=21;break;case 14:return t.prev=14,t.t0=t.catch(9),this.isWalletConnect=!1,this.web3=null,this.provider=null,localStorage.setItem("provider","none"),t.abrupt("return",!1);case 21:return t.t1=parseInt,t.next=24,this.provider.request({method:"eth_chainId"});case 24:t.t2=t.sent,this.chainId=(0,t.t1)(t.t2),n=Object(S.a)(e.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("chainChanged",this.chainId)}catch(s){n.e(s)}finally{n.f()}r=Object(S.a)(this.emitters.values());try{for(r.s();!(c=r.n()).done;)c.value.emit("connect")}catch(s){r.e(s)}finally{r.f()}return localStorage.setItem("provider","walletConnect"),t.abrupt("return",!0);case 32:case"end":return t.stop()}}),t,this,[[9,14]])})));return function(){return t.apply(this,arguments)}}()},{key:"metamask",value:function(){var t=Object(u.a)(i.a.mark((function t(){var n,a,r,c,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConnected()){t.next=2;break}return t.abrupt("return");case 2:if(this.isWalletConnect=!1,this.isMetamask=!0,console.log("Using MetaMask provider"),this.provider=window.ethereum,this.web3=new D.a(this.provider),this._registerProvider(),!window.ethereum.selectedAddress){t.next=20;break}console.log("Metamask already approved for this site"),this.web3.eth.defaultAccount=window.ethereum.selectedAddress,n=Object(S.a)(this.emitters.values());try{for(n.s();!(a=n.n()).done;)a.value.emit("accountsChanged",[window.ethereum.selectedAddress])}catch(i){n.e(i)}finally{n.f()}return t.t0=parseInt,t.next=16,this.provider.request({method:"eth_chainId"});case 16:t.t1=t.sent,this.chainId=(0,t.t0)(t.t1,16),t.next=27;break;case 20:return t.next=22,this.provider.request({method:"eth_requestAccounts"});case 22:return t.t2=parseInt,t.next=25,this.provider.request({method:"eth_chainId"});case 25:t.t3=t.sent,this.chainId=(0,t.t2)(t.t3,16);case 27:r=Object(S.a)(this.emitters.values());try{for(r.s();!(c=r.n()).done;)c.value.emit("chainChanged",e.chainId)}catch(i){r.e(i)}finally{r.f()}o=Object(S.a)(this.emitters.values());try{for(o.s();!(s=o.n()).done;)s.value.emit("connect")}catch(i){o.e(i)}finally{o.f()}return localStorage.setItem("provider","metamask"),t.abrupt("return",!0);case 33:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_registerProvider",value:function(){this.provider.on("accountsChanged",function(){var t=Object(u.a)(i.a.mark((function t(n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n&&n.length>0){e.web3.eth.defaultAccount=n[0],a=Object(S.a)(e.emitters.values());try{for(a.s();!(r=a.n()).done;)r.value.emit("accountsChanged",n)}catch(c){a.e(c)}finally{a.f()}}else e.disconnect();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.provider.on("chainChanged",function(){var t=Object(u.a)(i.a.mark((function t(n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isMetamask?e.chainId=parseInt(n,16):e.chainId=n,a=Object(S.a)(e.emitters.values());try{for(a.s();!(r=a.n()).done;)r.value.emit("chainChanged",e.chainId)}catch(c){a.e(c)}finally{a.f()}case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.provider.on("connect",function(){var t=Object(u.a)(i.a.mark((function t(n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(S.a)(e.emitters.values());try{for(a.s();!(r=a.n()).done;)r.value.emit("connect",n)}catch(c){a.e(c)}finally{a.f()}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.provider.on("disconnect",function(){var t=Object(u.a)(i.a.mark((function t(n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMetamask){t.next=2;break}return t.abrupt("return");case 2:e.web3=null,e.provider=null,e.isWalletConnect=!1,e.isMetamask=!1,localStorage.setItem("provider","none"),a=Object(S.a)(e.emitters.values());try{for(a.s();!(r=a.n()).done;)r.value.emit("disconnect",n)}catch(c){a.e(c)}finally{a.f()}case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"switchNetwork",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isWalletConnect){e.next=6;break}return this.provider.chainId=t,this.provider.networkId=t,e.next=5,this.provider.request({method:"wc_sessionUpdate",params:[{chainId:t,approved:!0}]});case 5:return e.abrupt("return");case 6:if(!this.isMetamask){e.next=15;break}return e.prev=7,e.next=10,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+t.toString(16)}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log("unhandled switching error",e.t0);case 15:case"end":return e.stop()}}),e,this,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addMetamaskChain",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMetamask){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T.getFromMap(t);case 4:return n=e.sent,e.prev=5,e.next=8,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x"+t.toString(16),chainName:n.name,nativeCurrency:{name:n.ticker,symbol:n.ticker,decimals:18},rpcUrls:[n.rpc],blockExplorerUrls:[this.explorerUrls.get(t)]}]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("unhandled error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3=null,localStorage.setItem("provider","none"),!this.provider){e.next=6;break}if(!this.isWalletConnect){e.next=6;break}return e.next=6,this.provider.disconnect();case 6:if(this.provider=null,this.isMetamask){t=Object(S.a)(this.emitters.values());try{for(t.s();!(n=t.n()).done;)n.value.emit("disconnect",null)}catch(a){t.e(a)}finally{t.f()}}this.isWalletConnect=!1,this.isMetamask=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();P.web3=null,P.provider=null,P.chainId=0,P.emitters=new Map,P.isWalletConnect=!1,P.isMetamask=!1,P.explorerUrls=new Map([[1,"https://etherscan.io"],[4,"https://rinkeby.etherscan.io"],[5,"https://goerli.etherscan.io"],[25,"https://cronos.crypto.org/explorer"],[56,"https://bscscan.com"],[100,"https://blockscout.com/xdai/mainnet"],[137,"https://polygonscan.com"],[250,"https://ftmscan.com"],[43114,"https://snowtrace.io"],[80001,"https://mumbai.polygonscan.com"]]),P.rpcUrls=new Map([[1,"https://mainnet.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783"],[4,"https://rinkeby.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783"],[5,"https://goerli.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783"],[25,"https://evm-cronos.crypto.org"],[56,"https://bsc-dataseed.binance.org/"],[100,"https://rpc.xdaichain.com"],[137,"https://polygon-rpc.com"],[250,"https://rpc.ftm.tools"],[43114,"https://api.avax.network/ext/bc/C/rpc"],[80001,"https://polygon-mumbai.infura.io/v3/9354d2b6c5ee45c2a4036efd7b617783"]]);var F=n(1),U=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._btnC_clicked=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!P.isMetamaskAvailable()){t.next=5;break}console.log("Metamask is available. Displaying modal"),e.openProviderModal(),t.next=8;break;case 5:return console.log("Metamask not available. Defaulting to Wallet Connect"),t.next=8,P.walletConnect();case 8:return t.next=10,n.toggleNetworkWarning();case 10:case"end":return t.stop()}}),t)}))),e._btnE_clicked=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.closeProviderModal(),e.closeNetworkSelectModal();case 2:case"end":return t.stop()}}),t)}))),e._btnD_clicked=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.disconnect();case 2:case"end":return e.stop()}}),e)}))),e._btnS_clicked=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"mainnet"===T.app.net||"mainnet.next"===T.app.net?(N("#testnetSwitch"),C("#mainnetSwitch"),N("#_aNetChange"),_("#_btnEth"),k()("#_btnEth").text("ETHEREUM"),_("#_btnBsc"),k()("#_btnBsc").text("BINANCE SMART CHAIN"),_("#_btnPoly"),k()("#_btnPoly").text("POLYGON"),_("#_btnAvax"),k()("#_btnAvax").text("AVALANCHE"),_("#_btnCro"),k()("#_btnCro").text("CRONOS"),1===P.chainId?(A("#_btnEth"),k()("#_btnEth").text("ETHEREUM (Current)")):56===P.chainId?(A("#_btnBsc"),k()("#_btnBsc").text("BINANCE SMART CHAIN (Current)")):137===P.chainId?(A("#_btnPoly"),k()("#_btnPoly").text("POLYGON (Current)")):43114===P.chainId?(A("#_btnAvax"),k()("#_btnAvax").text("AVALANCHE (Current)")):25===P.chainId&&(A("#_btnCro"),k()("#_btnCro").text("CRONOS (Current)"))):(C("#testnetSwitch"),N("#mainnetSwitch"),N("#_aNetChange"),_("#_btnRinkeby"),k()("#_btnRinkeby").text("RINKEBY"),_("#_btnGoerli"),k()("#_btnGoerli").text("GOERLI"),_("#_btnMumbai"),k()("#_btnMumbai").text("MUMBAI"),4===P.chainId?(A("#_btnRinkeby"),k()("#_btnRinkeby").text("RINKEBY (Current)")):5===P.chainId?(A("#_btnGoerli"),k()("#_btnGoerli").text("GOERLI (Current)")):80001===P.chainId&&(A("#_btnMumbai"),k()("#_btnMumbai").text("MUMBAI (Current)"))),e.openNetworkSelectModal();case 2:case"end":return t.stop()}}),t)}))),e._wc_clicked=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.closeProviderModal(),t.next=4,P.walletConnect();case 4:return t.next=6,n.toggleNetworkWarning();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e._mm_clicked=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.closeProviderModal(),t.next=4,P.metamask();case 4:return t.next=6,n.toggleNetworkWarning();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(d.a)(n,[{key:"openProviderModal",value:function(){k()("#_modSelectProvider").addClass("d-block"),k()("#_modSelectProvider").addClass("show")}},{key:"closeProviderModal",value:function(){k()("#_modSelectProvider").removeClass("d-block"),k()("#_modSelectProvider").removeClass("show")}},{key:"openNetworkSelectModal",value:function(){k()("#_modSelectNetwork").addClass("d-block"),k()("#_modSelectNetwork").addClass("show")}},{key:"closeNetworkSelectModal",value:function(){k()("#_modSelectNetwork").removeClass("d-block"),k()("#_modSelectNetwork").removeClass("show")}},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.hasListener("networkSelect")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("networkSelect.connect"),e.next=3,n.toggleNetworkWarning();case 3:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("networkSelect.disconnect"),e.next=3,n.toggleNetworkWarning();case 3:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("networkSelect.accountsChanged"),e.next=3,n.toggleNetworkWarning();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("networkSelect.chainChanged"),a.closeNetworkSelectModal(),e.next=4,n.toggleNetworkWarning();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P.addListener("networkSelect",t)),e.next=3,n.toggleNetworkWarning();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"alert alert-warning no-round p-0",role:"alert",children:"The Fundamenta web dApp is Beta software."}),Object(F.jsx)("div",{className:"p-0 ps-3 pe-3",children:Object(F.jsx)("div",{children:Object(F.jsxs)(x.a,{collapseOnSelect:!0,expand:"md",className:"navbar navbar-nav navbar-dark navbar-expand-md p-0",children:[Object(F.jsx)(x.a.Toggle,{className:"w-100 round btn"}),Object(F.jsx)(x.a.Collapse,{children:Object(F.jsxs)(w.a,{children:[Object(F.jsx)(j.LinkContainer,{to:"/",children:Object(F.jsx)(w.a.Link,{children:"Home"})}),Object(F.jsx)(j.LinkContainer,{to:"/staking",children:Object(F.jsx)(w.a.Link,{children:"Staking"})}),Object(F.jsx)(j.LinkContainer,{to:"/mining",children:Object(F.jsx)(w.a.Link,{children:"Mining"})}),Object(F.jsx)(j.LinkContainer,{to:"/teleport",children:Object(F.jsx)(w.a.Link,{children:"Teleport"})}),Object(F.jsx)(j.LinkContainer,{to:"/wrap",children:Object(F.jsx)(w.a.Link,{children:"Wrap"})}),Object(F.jsx)(j.LinkContainer,{to:"/unwrap",children:Object(F.jsx)(w.a.Link,{children:"Unwrap"})}),Object(F.jsx)(j.LinkContainer,{to:"/energize",children:Object(F.jsx)(w.a.Link,{children:"Energize"})}),Object(F.jsx)(j.LinkContainer,{to:"/nft",children:Object(F.jsx)(w.a.Link,{children:"NFT!"})}),Object(F.jsx)("button",{className:"round btn btn-outline-success btn-sm ms-1 me-1",id:"_btnS",onClick:this._btnS_clicked,children:"SWITCH NETWORK"})]})})]})})}),Object(F.jsxs)("div",{className:"p-0 ps-3 pe-3 pt-3",children:[Object(F.jsxs)("div",{id:"_aAcc",className:"d-none d-flex p-0",children:[Object(F.jsx)("button",{id:"_aAccText",className:"flex-grow-1 round-left alert alert-success text-left text-truncate d-inline-block"}),Object(F.jsx)("button",{className:"round-right btn btn-alert btn-danger",id:"_btnD",onClick:this._btnD_clicked})]}),Object(F.jsxs)("div",{id:"_aNoAcc",className:"d-none d-flex p-0",children:[Object(F.jsx)("button",{id:"_aAccText",className:"flex-grow-1 round-left alert alert-danger text-left",children:"No account connected"}),Object(F.jsx)("button",{className:"round-right btn btn-alert btn-success",id:"_btnC",onClick:this._btnC_clicked,children:"Connect"})]}),Object(F.jsx)("div",{id:"_aInvNet",className:"d-none round alert alert-warning d-flex align-items-center",children:Object(F.jsx)("div",{id:"_aInvNetText",className:"text-truncate d-inline-block"})})]}),Object(F.jsx)("div",{className:"modal fade",id:"_modSelectProvider",tabIndex:"-1",role:"dialog","aria-hidden":"true",children:Object(F.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(F.jsxs)("div",{className:"modal-content",children:[Object(F.jsx)("div",{className:"modal-header",children:Object(F.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"Select Wallet"})}),Object(F.jsxs)("div",{className:"modal-body",children:[Object(F.jsx)("div",{children:Object(F.jsx)("button",{className:"round btn btn-outline-info p-3 mb-3 w-100",onClick:this._wc_clicked,children:"Wallet Connect"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{className:"round btn btn-outline-warning p-3 w-100",onClick:this._mm_clicked,children:"MetaMask"})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h4",{className:"text-title",children:"Note to Wallet Connect users:"}),Object(F.jsx)("div",{children:"Fundamenta is a multi-chain system. Your ability to use this dapp may be impacted if your wallet does not support network switching."}),Object(F.jsx)("br",{}),Object(F.jsx)("div",{children:"For the best experience it is recommended to use the Fundamenta mobile wallet, available for iOS and Android."})]})]}),Object(F.jsx)("div",{className:"modal-footer",children:Object(F.jsx)("button",{type:"button",className:"round btn btn-danger",onClick:this._btnE_clicked,children:"Exit"})})]})})}),Object(F.jsx)("div",{className:"modal fade",id:"_modSelectNetwork",tabIndex:"-1",role:"dialog","aria-hidden":"true",children:Object(F.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(F.jsxs)("div",{className:"modal-content",children:[Object(F.jsx)("div",{className:"modal-header",children:Object(F.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"Select Network"})}),Object(F.jsxs)("div",{id:"mainnetSwitch",className:"modal-body",children:[Object(F.jsx)("button",{id:"_btnEth",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnEth").text("Sending request..."),e.next=3,P.switchNetwork(1);case 3:case"end":return e.stop()}}),e)}))),children:"Ethereum"}),Object(F.jsx)("button",{id:"_btnBsc",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnBsc").text("Sending request..."),e.next=3,P.addMetamaskChain(56);case 3:return e.next=5,P.switchNetwork(56);case 5:case"end":return e.stop()}}),e)}))),children:"Binance Smart Chain"}),Object(F.jsx)("button",{id:"_btnPoly",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnPoly").text("Sending request..."),e.next=3,P.addMetamaskChain(137);case 3:return e.next=5,P.switchNetwork(137);case 5:case"end":return e.stop()}}),e)}))),children:"Polygon"}),Object(F.jsx)("button",{id:"_btnAvax",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnAvax").text("Sending request..."),e.next=3,P.addMetamaskChain(43114);case 3:return e.next=5,P.switchNetwork(43114);case 5:case"end":return e.stop()}}),e)}))),children:"Avalanche"}),Object(F.jsx)("button",{id:"_btnCro",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnCro").text("Sending request..."),e.next=3,P.addMetamaskChain(25);case 3:return e.next=5,P.switchNetwork(25);case 5:case"end":return e.stop()}}),e)}))),children:"Cronos"}),Object(F.jsx)("br",{})]}),Object(F.jsxs)("div",{id:"testnetSwitch",className:"modal-body",children:[Object(F.jsx)("button",{id:"_btnRinkeby",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnRinkeby").text("Sending request..."),e.next=3,P.switchNetwork(4);case 3:case"end":return e.stop()}}),e)}))),children:"Rinkeby"}),Object(F.jsx)("button",{id:"_btnGoerli",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnGoerli").text("Sending request..."),e.next=3,P.switchNetwork(5);case 3:case"end":return e.stop()}}),e)}))),children:"Goerli"}),Object(F.jsx)("button",{id:"_btnMumbai",className:"round btn btn-outline-secondary p-3 mb-3 w-100",onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()("#_btnMumbai").text("Sending request..."),e.next=3,P.addMetamaskChain(80001);case 3:return e.next=5,P.switchNetwork(80001);case 5:case"end":return e.stop()}}),e)}))),children:"Mumbai"}),Object(F.jsx)("br",{})]}),Object(F.jsx)("div",{className:"modal-footer",children:Object(F.jsx)("button",{type:"button",className:"round btn btn-danger",onClick:this._btnE_clicked,children:"Exit"})})]})})})]})}}],[{key:"toggleNetworkWarning",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.network){e.next=2;break}return e.abrupt("return");case 2:if(P.isConnected()){e.next=8;break}return N("#_aInvNet"),N("#_aAcc"),C("#_aNoAcc"),N("#_btnS"),e.abrupt("return");case 8:if(null!=P.web3.eth.defaultAccount){e.next=16;break}return N("#_aInvNet"),N("#_aAcc"),C("#_aNoAcc"),N("#_btnS"),e.abrupt("return");case 16:k()("#_aAccText").text(P.web3.eth.defaultAccount),N("#_aNoAcc"),C("#_aAcc");case 19:if(C("#_btnS"),P.chainId&&0!==P.chainId){e.next=24;break}return N("#_aInvNet"),k()("#_btnD").text("Unknown"),e.abrupt("return");case 24:return e.next=26,T.getFromMap(P.chainId);case 26:return e.sent?N("#_aInvNet"):(k()("#_aInvNetText").text("Invalid network. Wallet set to chain ".concat(P.chainId)),C("#_aInvNet")),e.t0=k()("#_btnD"),e.next=31,P.getNetworkName();case 31:e.t1=e.sent,e.t0.text.call(e.t0,e.t1);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(r.a.Component),E=n(32),W=n.n(E),L=function e(){Object(l.a)(this,e)};L.to8bitHex=function(e){return("00"+e.toString(16)).slice(-2)},L.to32bitHex=function(e){return("00000000"+e.toString(16)).slice(-8)},L.bin2hex=function(e){for(var t="",n=0;n<e.length;n++)t+=L.to8bitHex(e[n]);return t},L.fromAuBigDecimal=function(e,t){return isNaN(t)&&(t=18),new W.a(e).divide(new W.a(Math.pow(10,t)))},L.fromAu=function(e,t){isNaN(t)&&(t=18);var n=new W.a(e).divide(new W.a(Math.pow(10,t)));return Number(n.value)},L.toAuHex=function(e,t){isNaN(t)&&(t=18);var n=new W.a(e).multiply(new W.a(Math.pow(10,t)));return Number(n.floor().getValue()).toString(16).padStart(64,"0")},L.toAuHexPrefixed=function(e,t){isNaN(t)&&(t=18);var n=new W.a(e).multiply(new W.a(Math.pow(10,t)));return"0x"+Number(n.floor().getValue()).toString(16).padStart(64,"0")};var R=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"clear",value:function(){N("#okAlert"),N("#warnAlert"),N("#errorAlert")}},{key:"showOk",value:function(e){k()("#okAlertText").text(e),C("#okAlert")}},{key:"showWarn",value:function(e){k()("#warnAlertText").text(e),C("#warnAlert")}},{key:"showError",value:function(e){k()("#errorAlertText").text(e),C("#errorAlert")}}]),e}(),B=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(F.jsxs)("div",{className:"mt-3",children:[Object(F.jsx)("div",{id:"okAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-success d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"okAlertText",className:"text-truncate d-inline-block"})})}),Object(F.jsx)("div",{id:"warnAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-warning d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"warnAlertText",className:"text-truncate d-inline-block"})})}),Object(F.jsx)("div",{id:"errorAlert",children:Object(F.jsx)("div",{className:"popup-div-margins alert alert-danger d-flex align-items-center",role:"alert",children:Object(F.jsx)("div",{id:"errorAlertText",className:"text-truncate d-inline-block"})})})]})}}]),n}(r.a.Component),q=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).btnCalc_Clicked=Object(u.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.clear(),t=parseFloat(k()("#amount").val()),a=parseFloat(k()("#time").val()),(isNaN(t)||isNaN(a)||0===t||0===a)&&R.showError("Invalid amounts entered"),r=(t/500*a).toFixed(2),R.showOk(+a+" day stake reward: "+r+" FMTA, "+(r*n.prices.fundamenta.usd).toFixed(2)+" USD");case 6:case"end":return e.stop()}}),e)}))),e}return Object(d.a)(n,[{key:"displayUserBalances",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.isConnected){e.next=2;break}return e.abrupt("return");case 2:t="",n="",a=T.networkMap.length,r=0,k.a.each(T.networkMap,Object(u.a)(i.a.mark((function e(){var c,o,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFmtaToken(this);case 2:if(c=e.sent,++r,!c){e.next=14;break}return(o=new D.a(new D.a.providers.HttpProvider(this.rpc))).eth.defaultAccount=P.web3.eth.defaultAccount,s=new o.eth.Contract(T.app.tokenAbi,c.address),e.next=10,s.methods.balanceOf(o.eth.defaultAccount).call();case 10:u=e.sent,l=L.fromAu(u,18),t+="<div>"+this.name+":&nbsp;</div>",n+="<div>"+l.toFixed(2)+" FMTA</div>";case 14:r===a&&(d='<form class="card mb-3 border border-primary shadow"><div class="card-header">Balances</div><div className="card-body"><div class="ps-3 pt-3"><div class="d-flex pb-3"><div class="text-end text-body">'+t+'</div><div class="text-start text-body">'+n+"</div></div></div></div></form>",k()("#balances").html(d));case 15:case"end":return e.stop()}}),e,this)}))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"displayUserStakes",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.isConnected){e.next=2;break}return e.abrupt("return");case 2:if(P.web3){e.next=4;break}return e.abrupt("return");case 4:t="",n="",a=T.networkMap.length,r=0,k.a.each(T.networkMap,Object(u.a)(i.a.mark((function e(){var c,o,s,u,l,d,p,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFmtaToken(this);case 2:if(c=e.sent,++r,!c){e.next=21;break}if((o=new D.a(new D.a.providers.HttpProvider(this.rpc))).eth.defaultAccount=P.web3.eth.defaultAccount,s=0,u=0,!c.stakingAddress){e.next=19;break}return l=new o.eth.Contract(T.app.stakeAbi,c.stakingAddress),e.next=13,l.methods.stakeOf(o.eth.defaultAccount).call();case 13:return d=e.sent,e.next=16,l.methods.rewardsAccrued().call();case 16:p=e.sent,s=L.fromAu(d,18),u=L.fromAu(p,18);case 19:t+="<div>"+this.name+":&nbsp;</div>",n+="<div>"+s.toFixed(2)+" ("+u.toFixed(2)+") FMTA</div>";case 21:r===a&&(b='<form class="card mb-3 border border-primary shadow"><div class="card-header">Stakes</div><div className="card-body"><div class="ps-3 pt-3"><div class="d-flex pb-3"><div class="text-end text-body">'+t+'</div><div class="text-start text-body">'+n+"</div></div></div></div></form>",k()("#stakes").html(b));case 22:case"end":return e.stop()}}),e,this)}))));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"displayTokenomics",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,c,o,s,u,l,d,p,b,h,m,f,v,x,w,j,y,g,O,N,A,C,_,S,I;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,T.getFmtaToken(r);case 7:if(!(c=e.sent)){e.next=73;break}if(o=new D.a(new D.a.providers.HttpProvider(r.rpc)),s=new o.eth.Contract(T.app.tokenAbi,c.address),u=new o.eth.Contract(T.app.stakeAbi,c.stakingAddress),l=void 0,d=new W.a(0),!r.liquidityMining){e.next=21;break}if(l=new o.eth.Contract(T.app.miningAbi,r.liquidityMining.address),!r.liquidityMining.address){e.next=21;break}return e.next=19,l.methods.poolInfo(0).call();case 19:p=e.sent,d=L.fromAuBigDecimal(p.TotalRewardsPaidByPool,18);case 21:if(b=new W.a(0),h=d,1!==t){e.next=44;break}return e.next=26,s.methods.balanceOf(T.app.holder0).call();case 26:return m=e.sent,f=L.fromAuBigDecimal(m,18),e.next=30,s.methods.balanceOf(T.app.holder1).call();case 30:return v=e.sent,x=L.fromAuBigDecimal(v,18),e.next=34,s.methods.balanceOf(T.app.holder2).call();case 34:return w=e.sent,j=L.fromAuBigDecimal(w,18),b=f.add(x).add(j),e.next=39,l.methods.poolInfo(1).call();case 39:y=e.sent,g=L.fromAuBigDecimal(y.TotalRewardsPaidByPool,18),O=new W.a(234966.16),N=new W.a(98566.84),h=h.add(g).add(O).add(N);case 44:if(A=new W.a(0),C=new W.a(0),!c.stakingAddress){e.next=57;break}return e.t0=L,e.next=50,u.methods.totalStakes().call();case 50:return e.t1=e.sent,A=e.t0.fromAuBigDecimal.call(e.t0,e.t1),e.t2=L,e.next=55,u.methods.totalRewardsPaid().call();case 55:e.t3=e.sent,C=e.t2.fromAuBigDecimal.call(e.t2,e.t3);case 57:return _=new W.a(0),e.prev=58,e.t4=L,e.next=62,s.methods.totalSupply().call();case 62:e.t5=e.sent,_=e.t4.fromAuBigDecimal.call(e.t4,e.t5),e.next=69;break;case 66:e.prev=66,e.t6=e.catch(58),console.log(e.t6);case 69:S=_.add(A).subtract(b),I=new W.a(0),"mainnet"!==T.app.net&&"mainnet.next"!==T.app.net||(I=S.multiply(new W.a(n.prices.fundamenta.usd.toString()))),k()(a).html('<form class="card mb-3 border border-primary shadow"><div class="card-header">'+r.name+'</div><div className="card-body"><div class="ps-3 pt-3"><div class="d-flex pb-3"><div class="text-end text-body"><div>Circulating:&nbsp;</div><div>Staked:&nbsp;</div><div>Market Cap:&nbsp;</div><div>Stake Rewards:&nbsp;</div><div>LP Rewards:&nbsp;</div></div><div class="text-start text-body"><div>'+Number(S.value).toFixed(2)+" FMTA</div><div>"+Number(A.value).toFixed(2)+" FMTA</div><div>"+Number(I.value).toFixed(2)+" USD</div><div>"+Number(C.value).toFixed(2)+" FMTA</div><div>"+Number(h.value).toFixed(2)+" FMTA</div></div></div></div></div></form>");case 73:case"end":return e.stop()}}),e,null,[[58,66]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"displayNetworkStats",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.coingecko.com/api/v3/simple/price?ids=fundamenta&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=false&include_last_updated_at=false",e.next=3,k.a.ajax({url:"https://api.coingecko.com/api/v3/simple/price?ids=fundamenta&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=false&include_last_updated_at=false",method:"GET",dataType:"json",cache:"false"});case 3:return n.prices=e.sent,e.next=6,T.fetchNetworkConfig();case 6:"mainnet"===T.app.net||"mainnet.next"===T.app.net?(this.displayTokenomics(1,"#ethStats"),this.displayTokenomics(56,"#bscStats"),this.displayTokenomics(137,"#polyStats"),this.displayTokenomics(43114,"#avaxStats"),this.displayTokenomics(25,"#croStats")):(this.displayTokenomics(4,"#ethStats"),this.displayTokenomics(80001,"#polyStats"));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),P.hasListener("home")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===P.web3.eth.defaultAccount){e.next=5;break}return e.next=3,n.displayUserBalances();case 3:return e.next=5,n.displayUserStakes();case 5:return e.next=7,n.displayNetworkStats();case 7:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k()("#balances").empty(),k()("#stakes").empty();case 2:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===P.web3.eth.defaultAccount){e.next=5;break}return e.next=3,n.displayUserBalances();case 3:return e.next=5,n.displayUserStakes();case 5:return e.next=7,n.displayNetworkStats();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===P.web3.eth.defaultAccount){e.next=5;break}return e.next=3,n.displayUserBalances();case 3:return e.next=5,n.displayUserStakes();case 5:return e.next=7,n.displayNetworkStats();case 7:case"end":return e.stop()}}),e)})))),P.addListener("home",t)),e.next=4,this.displayUserBalances();case 4:return e.next=6,this.displayUserStakes();case 6:return e.next=8,this.displayNetworkStats();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsxs)("div",{className:"page-content",children:[Object(F.jsx)("div",{id:"balances"}),Object(F.jsx)("div",{id:"stakes"}),Object(F.jsx)("div",{id:"ethStats"}),Object(F.jsx)("div",{id:"bscStats"}),Object(F.jsx)("div",{id:"polyStats"}),Object(F.jsx)("div",{id:"avaxStats"}),Object(F.jsx)("div",{id:"croStats"}),Object(F.jsx)("div",{children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Stake Calculator"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"amount",className:"round-left btn-primary form-control",placeholder:"Enter amount"}),Object(F.jsx)("input",{type:"number",id:"time",className:"round-right btn-primary form-control",placeholder:"Enter time"})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary round w-100",onClick:this.btnCalc_Clicked,children:"Calculate!"})})]}),Object(F.jsx)(B,{})]})]})})]})})})}}]),n}(r.a.Component);q.prices=null;var H=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).btnTake_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,T.getFmtaToken(t);case 7:return n=e.sent,r=new P.web3.eth.Contract(T.app.stakeAbi,n.stakingAddress),R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Take",!1),c=!1,e.prev=14,e.next=17,r.methods.withdrawReward().send({from:P.web3.eth.defaultAccount});case 17:o=e.sent,console.log("Transaction: ",o),c=o.status,e.next=26;break;case 22:e.prev=22,e.t0=e.catch(14),console.error(e.t0),c=!1;case 26:return e.next=28,a.validateUiState();case 28:R.clear(),c?R.showOk("Taking stake rewards success!"):R.showError("Taking stake rewards failed!");case 30:case"end":return e.stop()}}),e,null,[[14,22]])}))),a.btnCompound_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,T.getFmtaToken(t);case 7:return n=e.sent,r=new P.web3.eth.Contract(T.app.stakeAbi,n.stakingAddress),R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Compound",!1),c=!1,e.prev=14,e.next=17,r.methods.compoundRewards().send({from:P.web3.eth.defaultAccount});case 17:o=e.sent,console.log("Transaction: ",o),c=o.status,e.next=26;break;case 22:e.prev=22,e.t0=e.catch(14),console.error(e.t0),c=!1;case 26:return e.next=28,a.validateUiState();case 28:R.clear(),c?R.showOk("Compounding stake rewards success!"):R.showError("Compounding stake rewards failed!");case 30:case"end":return e.stop()}}),e,null,[[14,22]])}))),a.btnAdd_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n=parseFloat(k()("#inAddAmount").val()),!(isNaN(n)||n<=0)){e.next=9;break}return R.showWarn("Invalid amount entered"),e.abrupt("return");case 9:return e.next=11,a.getBalance(t);case 11:if(r=e.sent,!(isNaN(r)||r<n)){e.next=15;break}return R.showWarn("Amount exceeds balance"),e.abrupt("return");case 15:return e.next=17,T.getFmtaToken(t);case 17:return c=e.sent,o=new P.web3.eth.Contract(T.app.stakeAbi,c.stakingAddress),s=L.toAuHexPrefixed(n,c.decimals),R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Add",!1),u=!1,e.prev=25,e.next=28,o.methods.createStake(s).send({from:P.web3.eth.defaultAccount});case 28:l=e.sent,console.log("Transaction: ",l),u=l.status,e.next=37;break;case 33:e.prev=33,e.t0=e.catch(25),console.error(e.t0),u=!1;case 37:return e.next=39,a.validateUiState();case 39:R.clear(),u?R.showOk("Creating stake success!"):R.showError("Creating stake failed!"),k()("#inAddAmount").val("");case 42:case"end":return e.stop()}}),e,null,[[25,33]])}))),a.btnRemove_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n=parseFloat(k()("#inRemoveAmount").val()),!(isNaN(n)||n<=0)){e.next=9;break}return R.showWarn("Invalid amount entered"),e.abrupt("return");case 9:return e.next=11,a.getStake(t);case 11:if(r=e.sent,!(isNaN(r)||r<n)){e.next=15;break}return R.showWarn("Amount exceeds balance"),e.abrupt("return");case 15:return e.next=17,T.getFmtaToken(t);case 17:return c=e.sent,o=new P.web3.eth.Contract(T.app.stakeAbi,c.stakingAddress),s=L.toAuHexPrefixed(n,c.decimals),R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Remove",!1),u=!1,e.prev=25,e.next=28,o.methods.removeStake(s).send({from:P.web3.eth.defaultAccount});case 28:l=e.sent,console.log("Transaction: ",l),u=l.status,e.next=37;break;case 33:e.prev=33,e.t0=e.catch(25),console.error(e.t0),u=!1;case 37:return e.next=39,a.validateUiState();case 39:R.clear(),a.enableTab("Remove",!0),u?R.showOk("Removing stake success!"):R.showError("Removing stake failed!"),k()("#inRemoveAmount").val("");case 43:case"end":return e.stop()}}),e,null,[[25,33]])}))),a.currentTab=null,a}return Object(d.a)(n,[{key:"getStake",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.getFmtaToken(t);case 3:if(n=e.sent,a=0,r=new P.web3.eth.Contract(T.app.stakeAbi,n.stakingAddress),!P.web3.eth.defaultAccount){e.next=12;break}return e.next=9,r.methods.stakeOf(P.web3.eth.defaultAccount).call();case 9:(c=e.sent)||(c=0),a=L.fromAu(c,18);case 12:return e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.getFmtaToken(t);case 3:if(n=e.sent,a=0,r=new P.web3.eth.Contract(T.app.tokenAbi,n.address),!P.web3.eth.defaultAccount){e.next=12;break}return e.next=9,r.methods.balanceOf(P.web3.eth.defaultAccount).call();case 9:(c=e.sent)||(c=0),a=L.fromAu(c,18);case 12:return e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalances",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,o,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=0,a=0,r=0,e.next=6,T.getFmtaToken(t);case 6:if(c=e.sent,o=new P.web3.eth.Contract(T.app.tokenAbi,c.address),s=new P.web3.eth.Contract(T.app.stakeAbi,c.stakingAddress),!P.web3.eth.defaultAccount){e.next=25;break}return e.next=12,o.methods.balanceOf(P.web3.eth.defaultAccount).call();case 12:return(u=e.sent)||(u=0),a=L.fromAu(u,18),e.next=17,s.methods.stakeOf(P.web3.eth.defaultAccount).call();case 17:return(l=e.sent)||(l=0),n=L.fromAu(l,18),e.next=22,s.methods.rewardsAccrued().call();case 22:(d=e.sent)||(d=0),r=L.fromAu(d,18);case 25:return e.abrupt("return",{balance:a,stake:n,reward:r});case 28:return e.prev=28,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{balance:0,stake:0,reward:0});case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"disableNavBar",value:function(){A("#btnTake"),A("#btnCompound"),A("#btnAdd"),A("#btnRemove")}},{key:"validateUiState",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:return t=e.sent,e.next=5,T.getFmtaToken(t);case 5:if(n=e.sent,R.clear(),t&&n.stakingAddress){e.next=15;break}return this.disableNavBar(),this.hideAllTabs(),k()("#lblBalance").text("0.00"),k()("#lblStake").text("0.00"),k()("#lblReward").text("0.00"),R.showWarn("Staking is not available on this network"),e.abrupt("return");case 15:return e.next=17,this.getBalances(t);case 17:a=e.sent,r=new Intl.NumberFormat("us-us",{style:"decimal",useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:10}),k()("#lblBalance").text(r.format(a.balance)),k()("#lblStake").text(r.format(a.stake)),k()("#lblReward").text(r.format(a.reward)),this.enableTab("Take",a.reward>0),this.enableTab("Compound",a.reward>0),this.enableTab("Add",a.balance>0&&0===a.reward),this.enableTab("Remove",a.stake>0);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enableTab",value:function(e,t){t?(_("#btn".concat(e)),_("#div".concat(e))):(A("#btn".concat(e)),A("#div".concat(e)))}},{key:"hideAllTabs",value:function(){N("#divTake"),N("#divCompound"),N("#divAdd"),N("#divRemove"),this.currentTab=null}},{key:"showTab",value:function(e){e!==this.currentTab&&(N("#divTake"),N("#divCompound"),N("#divAdd"),N("#divRemove"),C(e),this.currentTab=e)}},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),this.hideAllTabs(),P.hasListener("staking")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("chainChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),P.addListener("staking",t)),e.next=5,this.validateUiState();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("staking")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Staking"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsx)("div",{className:"d-flex p-0",children:Object(F.jsx)("div",{className:"w-100 justify-content-start",children:Object(F.jsxs)(x.a,{collapseOnSelect:!0,expand:"sm",className:"navbar navbar-dark navbar-expand-sm p-0",children:[Object(F.jsx)(x.a.Toggle,{className:"w-100 round btn"}),Object(F.jsx)(x.a.Collapse,{children:Object(F.jsxs)(w.a,{children:[Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start ps-0",id:"btnTake",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divTake");case 2:case"end":return t.stop()}}),t)}))),children:"Take"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnCompound",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divCompound");case 2:case"end":return t.stop()}}),t)}))),children:"Compound"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnAdd",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divAdd");case 2:case"end":return t.stop()}}),t)}))),children:"Add"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnRemove",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divRemove"),A("#btnRemove");case 3:case"end":return t.stop()}}),t)}))),children:"Remove"})]})})]})})}),Object(F.jsxs)("div",{className:"d-flex mt-3 mb-3",children:[Object(F.jsxs)("div",{className:"text-end",children:[Object(F.jsx)("div",{children:"Balance:\xa0"}),Object(F.jsx)("div",{children:"Staked:\xa0"}),Object(F.jsx)("div",{children:"Rewards:\xa0"})]}),Object(F.jsxs)("div",{className:"text-start",children:[Object(F.jsx)("div",{id:"lblBalance",children:"0"}),Object(F.jsx)("div",{id:"lblStake",children:"0"}),Object(F.jsx)("div",{id:"lblReward",children:"0"})]})]}),Object(F.jsx)("div",{id:"divTake",children:Object(F.jsx)("button",{className:"round btn btn-primary w-100",onClick:this.btnTake_Clicked,children:"Take"})}),Object(F.jsx)("div",{id:"divCompound",children:Object(F.jsx)("button",{className:"round btn btn-primary w-100",onClick:this.btnCompound_Clicked,children:"Compound"})}),Object(F.jsx)("div",{id:"divAdd",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inAddAmount",className:"round-left btn-primary form-control",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"round-right btn btn-primary",onClick:this.btnAdd_Clicked,children:"Add"})]})}),Object(F.jsx)("div",{id:"divRemove",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inRemoveAmount",className:"round-left btn-primary form-control",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"round-right btn btn-primary",onClick:this.btnRemove_Clicked,children:"Remove"})]})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),z=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"allowance",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new P.web3.eth.Contract(T.app.tokenAbi,n.poolInfo.ContractAddress),e.prev=1,e.next=4,a.methods.allowance(P.web3.eth.defaultAccount,t.liquidityMining.address).call();case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",L.fromAu(r,18));case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new P.web3.eth.Contract(T.app.tokenAbi,n.ContractAddress),e.prev=1,r=L.toAuHexPrefixed(1e8,18),e.next=5,a.methods.approve(t.liquidityMining.address,r).send({from:P.web3.eth.defaultAccount});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),G=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).btnTake_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n=new P.web3.eth.Contract(T.app.miningAbi,t.liquidityMining.address),r=parseFloat(k()("#inTakeAmount").val()),(isNaN(r)||r<=0)&&(r=0),!(r>0)){e.next=15;break}return e.next=11,z.allowance(t,a.currentInfo);case 11:if(!(e.sent<r)){e.next=15;break}return e.next=15,z.approve(t,a.currentInfo);case 15:return R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Take",!1),c=!1,e.prev=20,o=L.toAuHexPrefixed(r,18),e.next=24,n.methods.withdrawAccruedYieldAndAdd(a.currentInfo.poolIndex,o).send({from:P.web3.eth.defaultAccount});case 24:s=e.sent,console.log("Transaction: ",s),c=s.status,e.next=33;break;case 29:e.prev=29,e.t0=e.catch(20),console.error(e.t0),c=!1;case 33:return e.next=35,a.validateUiState();case 35:R.clear(),c?R.showOk("Taking mining yield success!"):R.showError("Taking mining yield failed!"),k()("#inTakeAmount").val("");case 38:case"end":return e.stop()}}),e,null,[[20,29]])}))),a.btnAdd_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n=new P.web3.eth.Contract(T.app.miningAbi,t.liquidityMining.address),r=parseFloat(k()("#inAddAmount").val()),!(isNaN(r)||r<=0)){e.next=10;break}return R.showWarn("Invalid amount entered"),e.abrupt("return");case 10:if(!(isNaN(a.currentInfo.unlocked)||a.currentInfo.unlocked<r)){e.next=13;break}return R.showWarn("Amount exceeds balance"),e.abrupt("return");case 13:return e.next=15,z.allowance(t,a.currentInfo);case 15:if(!(e.sent<r)){e.next=19;break}return e.next=19,z.approve(t,a.currentInfo);case 19:return R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Add",!1),c=k()("#selLockPeriod option:selected").val(),o=parseInt(c),s=!1,e.prev=26,e.next=29,T.getFmtaToken(t);case 29:return u=e.sent,l=L.toAuHexPrefixed(r,u.decimals),e.next=33,n.methods.addPosition(l,o,a.currentInfo.poolIndex).send({from:P.web3.eth.defaultAccount});case 33:d=e.sent,console.log("Transaction: ",d),s=d.status,e.next=42;break;case 38:e.prev=38,e.t0=e.catch(26),console.error(e.t0),s=!1;case 42:return e.next=44,a.validateUiState();case 44:R.clear(),s?R.showOk("Creating stake success!"):R.showError("Creating stake failed!"),k()("#inAddAmount").val("");case 47:case"end":return e.stop()}}),e,null,[[26,38]])}))),a.btnRemove_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return n=new P.web3.eth.Contract(T.app.miningAbi,t.liquidityMining.address),R.clear(),R.showWarn("Processing. Please wait..."),a.disableNavBar(),a.enableTab("Remove",!1),r=!1,e.prev=11,e.next=14,n.methods.removePosition(a.currentInfo.poolIndex).send({from:P.web3.eth.defaultAccount});case 14:c=e.sent,console.log("Transaction: ",c),r=c.status,e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),console.error(e.t0),r=!1;case 23:return e.next=25,a.validateUiState();case 25:R.clear(),a.enableTab("Remove",!0),r?R.showOk("Removing position success!"):R.showError("Removing position failed!");case 28:case"end":return e.stop()}}),e,null,[[11,19]])}))),a.selPool_Changed=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.validateUiState();case 1:case"end":return e.stop()}}),e)}))),a.currentTab=null,a.currentInfo=null,a}return Object(d.a)(n,[{key:"getInfo",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c,o,s,u,l,d,p,b,h,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A("#selPool"),e.prev=1,null===P.web3.eth.defaultAccount){e.next=30;break}return a=new P.web3.eth.Contract(T.app.miningAbi,t.liquidityMining.address),e.next=6,a.methods.poolInfo(n).call();case 6:return r=e.sent,c=new P.web3.eth.Contract(T.app.tokenAbi,r.ContractAddress),e.next=10,c.methods.balanceOf(P.web3.eth.defaultAccount).call();case 10:return(o=e.sent)||(o=0),s=L.fromAu(o,18),e.next=15,a.methods.accountPosition(P.web3.eth.defaultAccount,n).call();case 15:return u=e.sent,l=0,l=u?u._lockedAmount:0,d=L.fromAu(l,18),e.next=21,P.web3.eth.getBlockNumber();case 21:return p=e.sent,e.next=24,a.methods.showCurrentLockPeriods().call();case 24:b=e.sent,(h=u._unlockHeight-p)<0&&(h=0),m=null,m=0===h?"Unlocked":"Unlocks in ".concat(h," blocks"),this.currentInfo={unlocked:s,locked:d,remaining:h,status:m,poolIndex:n,poolInfo:r,lockPeriods:b};case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(1),console.error(e.t0),this.currentInfo=null;case 36:_("#selPool");case 37:case"end":return e.stop()}}),e,this,[[1,32]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"populatePoolDropDown",value:function(){k()("#selPool").empty(),k()("#selPool").append("<option>Select Pool</option>");var e=T.app.lpPools[P.chainId];e&&k.a.each(e,(function(e,t){k()("#selPool").append('<option value="'.concat(e,'">').concat(t,"</option>"))}))}},{key:"disableNavBar",value:function(){A("#btnTake"),A("#btnAdd"),A("#btnRemove"),A("#selPool")}},{key:"validateUiState",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent,R.clear(),t){e.next=13;break}return this.disableNavBar(),this.hideAllTabs(),k()("#lblUnlocked").text("0.00"),k()("#lblLocked").text("0.00"),k()("#lblStatus").text("N/A"),k()("#inTakeAmount").attr("placeholder","Enter amount"),k()("#inAddAmount").attr("placeholder","Enter amount"),e.abrupt("return");case 13:if(_("#selPool"),n=k()("#selPool option:selected").val(),a=parseInt(n),!isNaN(a)){e.next=27;break}return A("#btnTake"),A("#btnAdd"),A("#btnRemove"),this.hideAllTabs(),k()("#lblUnlocked").text("0.00"),k()("#lblLocked").text("0.00"),k()("#lblStatus").text("N/A"),k()("#inTakeAmount").attr("placeholder","Add to position"),k()("#inAddAmount").attr("placeholder","Enter amount"),e.abrupt("return");case 27:return e.next=29,this.getInfo(t,a);case 29:r=this.currentInfo,k()("#selLockPeriod").empty(),k()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[0],'">').concat(r.lockPeriods[0]," days</option>")),k()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[1],'">').concat(r.lockPeriods[1]," days</option>")),k()("#selLockPeriod").append('<option value="'.concat(r.lockPeriods[2],'">').concat(r.lockPeriods[2]," days</option>")),c=new Intl.NumberFormat("us-us",{style:"decimal",useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:10}),k()("#lblUnlocked").text(c.format(r.unlocked)),k()("#lblLocked").text(c.format(r.locked)),k()("#lblStatus").text(r.status),k()("#inTakeAmount").attr("placeholder","Add to position (max ".concat(r.unlocked,")")),k()("#inAddAmount").attr("placeholder","Enter amount (max ".concat(r.unlocked,")")),this.enableTab("Take",0===r.remaining&&r.locked>0),this.enableTab("Add",r.unlocked>0&&0===r.locked),this.enableTab("Remove",0===r.remaining&&r.locked>0);case 43:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enableTab",value:function(e,t){t?(_("#btn".concat(e)),_("#div".concat(e))):(A("#btn".concat(e)),A("#div".concat(e)))}},{key:"hideAllTabs",value:function(){N("#divTake"),N("#divAdd"),N("#divRemove"),this.currentTab=null}},{key:"showTab",value:function(e){e!==this.currentTab&&(N("#divTake"),N("#divAdd"),N("#divRemove"),C(e),this.currentTab=e)}},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),this.hideAllTabs(),P.hasListener("mining")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("chainChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.populatePoolDropDown(),e.next=3,n.validateUiState();case 3:case"end":return e.stop()}}),e)})))),P.addListener("staking",t)),P.isConnected()&&this.populatePoolDropDown(),e.next=6,this.validateUiState();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("mining")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"LP Mining"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)(x.a,{collapseOnSelect:!0,expand:"sm",className:"navbar navbar-dark navbar-expand-sm p-0",children:[Object(F.jsx)(x.a.Toggle,{className:"w-100 round btn"}),Object(F.jsx)(x.a.Collapse,{children:Object(F.jsxs)(w.a,{children:[Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start ps-0",id:"btnTake",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divTake");case 2:case"end":return t.stop()}}),t)}))),children:"Take"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnAdd",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divAdd");case 2:case"end":return t.stop()}}),t)}))),children:"Add"}),Object(F.jsx)("button",{type:"button",className:"btn btn-link nav-link text-start",id:"btnRemove",onClick:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R.clear(),e.showTab("#divRemove");case 2:case"end":return t.stop()}}),t)}))),children:"Remove"}),Object(F.jsx)("select",{id:"selPool",className:"btn btn-link nav-link text-start",type:"button","data-toggle":"dropdown",onChange:this.selPool_Changed})]})})]}),Object(F.jsxs)("div",{className:"d-flex mt-3 mb-3",children:[Object(F.jsxs)("div",{className:"text-end",children:[Object(F.jsx)("div",{children:"Unlocked:\xa0"}),Object(F.jsx)("div",{children:"Locked:\xa0"}),Object(F.jsx)("div",{children:"Status:\xa0"})]}),Object(F.jsxs)("div",{className:"text-start",children:[Object(F.jsx)("div",{id:"lblUnlocked",children:"0"}),Object(F.jsx)("div",{id:"lblLocked",children:"0"}),Object(F.jsx)("div",{id:"lblStatus",children:"N/A"})]})]}),Object(F.jsx)("div",{id:"divTake",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inTakeAmount",className:"round-left btn-primary form-control",placeholder:"Enter amount"}),Object(F.jsx)("button",{className:"round-right btn btn-primary",onClick:this.btnTake_Clicked,children:"Take"})]})}),Object(F.jsx)("div",{id:"divAdd",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"number",id:"inAddAmount",className:"round-left btn-primary form-control",placeholder:"Enter amount"}),Object(F.jsx)("select",{id:"selLockPeriod",className:"btn btn-primary dropdown-toggle",type:"button","data-toggle":"dropdown",style:{width:"auto"}}),Object(F.jsx)("button",{className:"round-right btn btn-primary",onClick:this.btnAdd_Clicked,children:"Add"})]})}),Object(F.jsx)("div",{id:"divRemove",children:Object(F.jsx)("div",{className:"input-group mb-3",children:Object(F.jsx)("button",{className:"round btn btn-primary w-100",onClick:this.btnRemove_Clicked,children:"Remove"})})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),Y=function(){function e(){Object(l.a)(this,e),this.cancelRequested=!1}return Object(d.a)(e,[{key:"cancel",value:function(){this.cancelRequested=!0}}]),e}(),V=function(){function e(t,n){Object(l.a)(this,e),this.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.teleport=t,this.emitter=new f.a,this.cancelRequested=!1,this.cancellationToken=n}return Object(d.a)(e,[{key:"on",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emitter.on(t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancellationToken.cancelRequested){e.next=4;break}return console.warn("Energize task cancelled by token"),e.abrupt("return");case 4:return console.log("Attempting energize"),e.next=7,this.energize();case 7:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.delay(1e4);case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"energize",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.teleport.transactionData,n=this.teleport.blockNumber,a=new P.web3.eth.Contract(T.app.bridgeAbi,this.teleport.destination.bridge),e.next=5,a.methods.queryToken(this.teleport.destinationToken.id).call();case 5:return r=e.sent,c=r.numSigners,e.next=9,this.getApproval(n,t,c);case 9:if(!((o=e.sent).length<c)){e.next=22;break}if(!this.cancellationToken.cancelRequested){e.next=13;break}return e.abrupt("return",!0);case 13:if(!(o.length>0)){e.next=20;break}if(0===o[0].code){e.next=18;break}if(this.emitter.emit("error",o[0].code,o[0].data.s),100===o[0].code){e.next=18;break}return e.abrupt("return",!0);case 18:e.next=21;break;case 20:this.emitter.emit("error",-1,"Not Approved");case 21:return e.abrupt("return",!1);case 22:return s=[],k.a.each(o,(function(){s.push("0x".concat(this.data.s))})),this.emitter.emit("ok",s),e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getApproval",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=1;case 2:if(!(c<=T.app.serverCount)){e.next=20;break}return e.next=5,this.getServerApproval(c,t,n);case 5:if(null!=(o=e.sent)){e.next=9;break}return console.log("No response"),e.abrupt("continue",17);case 9:if(0===o.code){e.next=13;break}return console.log("Server responded with error",o.code),r.push(o),e.abrupt("return",r);case 13:if(console.log("Server responded OK"),r.push(o),!(r.length>=a)){e.next=17;break}return e.abrupt("break",20);case 17:c++,e.next=2;break;case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getServerApproval",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://cp".concat(t,".").concat(T.app.serverDomain,"/validate/?n=").concat(T.app.net,"&d=").concat(a,"&b=").concat(n),console.log("Contacting server:",t),e.next=4,k.a.ajax({url:r,method:"GET",dataType:"json",cache:"false"});case 4:return c=e.sent,console.log(c),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"recover",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,o,s,l,d,p,b,h,m,f,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.web3.eth.getTransactionReceipt(t);case 2:if(n=e.sent){e.next=6;break}return console.log("Receipt not found. Recovery failed"),e.abrupt("return");case 6:return a=n.blockNumber.toString(16),k.a.each(n.logs,Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.topics[0]!==T.app.withdrawEventHash){e.next=9;break}return t=this.data.slice(2),s=t.slice(24,64),r=t.slice(120,128),l=t.slice(128,192),d=this.topics[1].slice(2),c=this.topics[2].slice(58),o=this.topics[3].slice(58),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})))),p=s.toString().slice(-40).padStart(64,0),b="0x"+l+r+c+o+p+d,h=parseInt(c,16),m=parseInt(o,16),e.next=14,T.getFromMap(h);case 14:return f=e.sent,e.next=17,T.getToken(f,m);case 17:return v=e.sent,e.abrupt("return",{txHash:t,blockNumber:a,transactionData:b,destination:f,destinationToken:v});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).completedTeleport=null,a.cancellationToken=new Y,a._populateTokenDropDownLock=!1,a}return Object(d.a)(n,[{key:"populateTokenDropDown",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._populateTokenDropDownLock){e.next=2;break}return e.abrupt("return");case 2:return this._populateTokenDropDownLock=!0,console.log("populateTokenDropDown"),k()("#sourceToken").empty(),k()("#destination").empty(),k()("#sourceToken").append(k()("<option />").text("Select token")),k()("#destination").append(k()("<option />").text("Select destination")),e.next=10,this.validateUiState();case 10:return e.next=12,T.getFromMap(P.chainId);case 12:if(t=e.sent){e.next=16;break}return this._populateTokenDropDownLock=!1,e.abrupt("return");case 16:return e.next=18,T.getFmtaToken(t);case 18:n=e.sent,k()("#sourceToken").append(k()("<option />").text(n.ticker)),k.a.each(t.tokens,(function(){this.id&&k()("#sourceToken").append(k()("<option />").text(this.ticker))})),this._populateTokenDropDownLock=!1;case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSourceTokenFromDropdown",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return n=k()("#sourceToken option:selected").text(),k.a.each(t.tokens,(function(){if(this.ticker===n)return a=this,!1})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDestinationNetworkFromDropDown",value:function(){var e,t=k()("#destination option:selected").text();return k.a.each(T.network,(function(){if(this.name===t)return e=this,!1})),e}},{key:"getDestinationTokenFromDropDown",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSourceTokenFromDropdown();case 2:return t=e.sent,n=this.getDestinationNetworkFromDropDown(),k.a.each(n.tokens,(function(){if(this.ticker===t.ticker)return a=this,!1})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateUiState",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:return t=e.sent,R.clear(),A("#button"),e.next=7,this.getTokenBalance();case 7:if(n=e.sent,t){e.next=11;break}return A("#form"),e.abrupt("return");case 11:if(t.chainId===P.chainId){e.next=13;break}return e.abrupt("return");case 13:if(!(k()("#destination").prop("selectedIndex")-1<0)){e.next=16;break}return e.abrupt("return");case 16:if(a=parseFloat(k()("#amount").val()),!(isNaN(a)||a<=0||isNaN(n)||n<a)){e.next=21;break}return R.showWarn("Invalid amount entered"),A("#button"),e.abrupt("return");case 21:_("#button");case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTokenBalance",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:return t=e.sent,e.next=5,this.getSourceTokenFromDropdown();case 5:if(n=e.sent,t&&n){e.next=9;break}return k()("#amount").attr("placeholder","Enter amount"),e.abrupt("return");case 9:if(P.chainId!==t.chainId||!P.web3.eth.defaultAccount){e.next=18;break}return a=new P.web3.eth.Contract(T.app.tokenAbi,n.address),e.next=13,a.methods.balanceOf(P.web3.eth.defaultAccount).call();case 13:return(r=e.sent)||(r=0),c=L.fromAu(r,n.decimals),k()("#amount").attr("placeholder","Enter amount (max ".concat(c.toString(),")")),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNonce",value:function(){var e=P.web3.eth.defaultAccount.toString().slice(-40),t=L.to32bitHex(Date.now()),n=new Uint8Array(8);return window.crypto.getRandomValues(n),"0x"+(t+e+L.bin2hex(n))}},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),P.hasListener("teleport")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),e.next=3,n.populateTokenDropDown();case 3:_("#form");case 4:case"end":return e.stop()}}),e)})))),t.on("disconnect",(function(){A("#form"),R.clear(),n.cancellationToken.cancel()})),t.on("accountsChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&0!==t.length){e.next=3;break}return A("#form"),e.abrupt("return");case 3:return R.clear(),e.next=6,n.populateTokenDropDown();case 6:return _("#form"),e.next=9,n.validateUiState();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),e.next=3,n.populateTokenDropDown();case 3:if(null!=n.completedTeleport){e.next=7;break}return e.next=6,n.validateUiState();case 6:return e.abrupt("return");case 7:return e.next=9,T.getFromMap(P.chainId);case 9:if(a=e.sent,n.completedTeleport.destination.chainId===P.chainId){e.next=13;break}return R.showWarn("Switch to the "+a.name+" network to energize"),e.abrupt("return");case 13:return R.showWarn("Waiting for energize. Do not close this page"),n.cancellationToken=new Y,(r=new V(n.completedTeleport,n.cancellationToken)).on("error",(function(e,t){100!==e&&(R.clear(),_("#form")),R.showError("Error "+e+": "+t)})),r.on("ok",function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),R.showWarn("Energized confirmed. Processing transaction..."),e.prev=2,n=new P.web3.eth.Contract(T.app.bridgeAbi,r.teleport.destination.bridge),e.next=6,n.methods.deposit(t,r.teleport.transactionData).send({from:P.web3.eth.defaultAccount});case 6:a=e.sent,console.log("Transaction: ",a),_("#form"),R.clear(),R.showOk("Energize success!"),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(2),R.clear(),R.showError("Energize failed!"),_("#form"),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()),e.next=20,r.start();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P.addListener("teleport",t)),P.isConnected()?_("#form"):A("#form"),e.next=5,this.populateTokenDropDown();case 5:k()("#sourceToken").on("change",Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:return t=e.sent,e.next=5,n.getSourceTokenFromDropdown();case 5:return a=e.sent,k()("#destination").empty(),k()("#destination").append(k()("<option />").text("Select destination")),e.next=10,n.validateUiState();case 10:if(a){e.next=12;break}return e.abrupt("return");case 12:k.a.each(T.network,(function(){var e=this,n=this.tokens;e!==t&&k.a.each(n,(function(){this.ticker===a.ticker&&k()("#destination").append(k()("<option />").text(e.name))}))}));case 13:case"end":return e.stop()}}),e)})))),k()("#destination").on("change",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),k()("#amount").on("change",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),k()("#button").on("click",Object(u.a)(i.a.mark((function e(){var t,a,r,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),A("#form"),e.next=4,T.getFromMap(P.chainId);case 4:return t=e.sent,e.next=7,n.getSourceTokenFromDropdown();case 7:return a=e.sent,e.next=10,n.getDestinationNetworkFromDropDown();case 10:return r=e.sent,e.next=13,n.getDestinationTokenFromDropDown();case 13:return c=e.sent,o=L.toAuHex(k()("#amount").val(),a.decimals),e.prev=15,R.showWarn("Processing teleport. Please wait..."),s=new P.web3.eth.Contract(T.app.bridgeAbi,t.bridge),e.next=20,s.methods.withdraw(n.createNonce(),r.chainId,c.id,"0x"+o).send({from:P.web3.eth.defaultAccount});case 20:return u=e.sent,console.log("Withdraw: ",u),e.next=24,V.recover(u.transactionHash);case 24:if(n.completedTeleport=e.sent,R.clear(),R.showOk("Teleport completed."),!P.isMetamask){e.next=31;break}R.showWarn("Switch to "+r.name+" to energize"),e.next=35;break;case 31:if(!P.isWalletConnect){e.next=35;break}return R.showWarn("Requesting netework switch to "+r.name+" to energize"),e.next=35,P.switchNetwork(r.chainId);case 35:e.next=43;break;case 37:e.prev=37,e.t0=e.catch(15),R.clear(),R.showError("Teleport transaction failed"),console.error(e.t0),_("#form");case 43:return e.next=45,n.getTokenBalance();case 45:case"end":return e.stop()}}),e,null,[[15,37]])}))));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("teleport"),this.cancellationToken.cancel()}},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Teleport"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"sourceToken",className:"round-left btn-primary dropdown-toggle form-control",type:"button","data-toggle":"dropdown"}),Object(F.jsx)("input",{type:"number",id:"amount",className:"round-right btn-primary form-control numeric-input",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{className:"mb-3",children:Object(F.jsx)("select",{id:"destination",className:"round btn-primary dropdown-toggle form-control",type:"button","data-toggle":"dropdown"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"round btn btn-primary w-100",children:"Teleport!"})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),J=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"wrappable",value:function(e){var t=[];return k.a.each(e,(function(){var e={chainId:this.chainId,name:this.name,ticker:this.ticker,tokens:[]};k.a.each(this.tokens,(function(){this.backingToken&&e.tokens.push(this)})),e.tokens.length>0&&t.push(e)})),t}}]),e}(),X=function(){function e(t){Object(l.a)(this,e),this.wrap=t,this._populateTokenDropDownLock=!1}return Object(d.a)(e,[{key:"getTokenBalance",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSelectedData();case 2:if(t=e.sent){e.next=6;break}return k()("#amount").attr("placeholder","Enter amount"),e.abrupt("return");case 6:if(n=t.network,a=t.token,P.chainId!==n.chainId||!P.web3.eth.defaultAccount){e.next=17;break}return r=this.wrap?new P.web3.eth.Contract(T.app.tokenAbi,a.backingToken.address):new P.web3.eth.Contract(T.app.tokenAbi,a.address),e.next=12,r.methods.balanceOf(P.web3.eth.defaultAccount).call();case 12:return(c=e.sent)||(c=0),o=L.fromAu(c,a.decimals),k()("#amount").attr("placeholder","Enter amount (max ".concat(o.toString(),")")),e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFromMap(P.chainId);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!((n=k()("#token").prop("selectedIndex")-1)<0)){e.next=8;break}return e.abrupt("return");case 8:return a=J.wrappable(T.network),r=null,k.a.each(a,(function(){if(this.chainId===P.chainId)return r=this,!1})),c=r.tokens[n],e.abrupt("return",{network:t,token:c});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"populateTokenDropDown",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._populateTokenDropDownLock){e.next=2;break}return e.abrupt("return");case 2:if(this._populateTokenDropDownLock=!0,console.log("populateTokenDropDown"),k()("#token").empty(),k()("#token").append(k()("<option />").text("Select token")),t=P.chainId,!isNaN(t)){e.next=11;break}return A("#form"),this._populateTokenDropDownLock=!1,e.abrupt("return");case 11:return _("#form"),e.next=14,T.fetchNetworkConfig();case 14:if(!isNaN(P.chainId)&&0!==P.chainId){e.next=18;break}return A("#form"),this._populateTokenDropDownLock=!1,e.abrupt("return");case 18:if(n=J.wrappable(T.network),a=null,k.a.each(n,(function(){if(this.chainId===P.chainId)return a=this,!1})),a){e.next=24;break}return this._populateTokenDropDownLock=!1,e.abrupt("return");case 24:this.wrap?k.a.each(a.tokens,(function(){k()("#token").append(k()("<option />").text(this.backingToken.ticker))})):k.a.each(a.tokens,(function(){k()("#token").append(k()("<option />").text(this.ticker))})),this._populateTokenDropDownLock=!1;case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerWalletListeners",value:function(e){var t=this;if(!P.hasListener(e)){var n=new f.a;n.on("connect",function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.populateTokenDropDown();case 2:_("#form");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("disconnect",(function(e){A("#form"),R.clear()})),n.on("accountsChanged",function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&0!==n.length){e.next=3;break}return A("#form"),e.abrupt("return");case 3:return e.next=5,t.populateTokenDropDown();case 5:_("#form");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("chainChanged",function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.populateTokenDropDown();case 2:_("#form");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P.addListener(e,n)}}}]),e}(),Q=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).btnWrap_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.common.getSelectedData();case 2:return t=e.sent,n=parseFloat(k()("#amount").val()),e.next=6,a.common.getTokenBalance();case 6:if(r=e.sent,!(isNaN(n)||n<=0)){e.next=10;break}return R.showWarn("Invalid amount entered"),e.abrupt("return");case 10:if(!(isNaN(r)||r<n)){e.next=13;break}return R.showWarn("Amount exceeds balance"),e.abrupt("return");case 13:return c=new P.web3.eth.Contract(T.app.tokenAbi,t.token.backingToken.address),o=new P.web3.eth.Contract(T.app.tokenAbi,t.token.address),R.clear(),R.showWarn("Processing. Please wait..."),A("#form"),s=!1,e.prev=19,e.next=22,a.getTokenAllowance();case 22:if(!(e.sent<n)){e.next=32;break}return u=L.toAuHexPrefixed(1e8,t.token.decimals),e.next=27,c.methods.approve(t.token.address,u).send({from:P.web3.eth.defaultAccount});case 27:l=e.sent,console.log("Transaction: ",l),s=l.status,e.next=33;break;case 32:s=!0;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(19),console.error(e.t0),s=!1;case 39:if(!s){e.next=53;break}return e.prev=40,d=L.toAuHexPrefixed(n,t.token.decimals),e.next=44,o.methods.wrap(d).send({from:P.web3.eth.defaultAccount});case 44:p=e.sent,console.log("Transaction: ",p),s=p.status,e.next=53;break;case 49:e.prev=49,e.t1=e.catch(40),console.error(e.t1),s=!1;case 53:return e.next=55,a.common.getTokenBalance();case 55:_("#form"),R.clear(),s?R.showOk("Wrap success!"):R.showError("Wrap failed!"),k()("#amount").val("");case 59:case"end":return e.stop()}}),e,null,[[19,35],[40,49]])}))),a.common=new X(!0),a}return Object(d.a)(n,[{key:"getTokenAllowance",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.common.getSelectedData();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",0);case 5:if(n=t.network,a=t.token,P.chainId!==n.chainId||!P.web3.eth.defaultAccount){e.next=15;break}return r=new P.web3.eth.Contract(T.app.tokenAbi,a.backingToken.address),e.next=11,r.methods.allowance(P.web3.eth.defaultAccount,t.token.address).call();case 11:if(c=e.sent){e.next=14;break}return e.abrupt("return",0);case 14:return e.abrupt("return",L.fromAu(c,a.decimals).toString());case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),this.common.registerWalletListeners("wrap"),P.isConnected()?_("#form"):A("#form"),e.next=5,this.common.populateTokenDropDown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("wrap")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Wrap"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"token",className:"round-left btn-primary dropdown-toggle form-control",type:"button","data-toggle":"dropdown",onChange:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.common.getTokenBalance();case 2:case"end":return t.stop()}}),t)})))}),Object(F.jsx)("input",{type:"number",id:"amount",className:"round-right btn-primary form-control",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"round btn btn-primary w-100",onClick:this.btnWrap_Clicked,children:"Wrap!"})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),Z=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).btnUnwrap_Clicked=Object(u.a)(i.a.mark((function e(){var t,n,r,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.common.getSelectedData();case 2:return t=e.sent,n=parseFloat(k()("#amount").val()),e.next=6,a.common.getTokenBalance();case 6:if(r=e.sent,!(isNaN(n)||n<=0)){e.next=10;break}return R.showWarn("Invalid amount entered"),e.abrupt("return");case 10:if(!(isNaN(r)||r<n)){e.next=13;break}return R.showWarn("Amount exceeds balance"),e.abrupt("return");case 13:return c=new P.web3.eth.Contract(T.app.tokenAbi,t.token.address),R.clear(),R.showWarn("Processing. Please wait..."),A("#form"),o=!1,e.prev=18,s=L.toAuHexPrefixed(n,t.token.decimals),e.next=22,c.methods.unwrap(s).send({from:P.web3.eth.defaultAccount});case 22:u=e.sent,console.log("Transaction: ",u),o=u.status,e.next=31;break;case 27:e.prev=27,e.t0=e.catch(18),console.error(e.t0),o=!1;case 31:return e.next=33,a.common.getTokenBalance();case 33:R.clear(),_("#form"),o?R.showOk("Unwrap success!"):R.showError("Unwrap failed!"),k()("#amount").val("");case 37:case"end":return e.stop()}}),e,null,[[18,27]])}))),a.common=new X(!1),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),this.common.registerWalletListeners("unwrap"),P.isConnected()?_("#form"):A("#form"),e.next=5,this.common.populateTokenDropDown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("unwrap")}},{key:"render",value:function(){var e=this;return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Unwrap"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("select",{id:"token",className:"round-left btn-primary dropdown-toggle form-control",type:"button","data-toggle":"dropdown",onChange:Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.common.getTokenBalance();case 2:case"end":return t.stop()}}),t)})))}),Object(F.jsx)("input",{type:"number",id:"amount",className:"round-right btn-primary form-control",placeholder:"Enter amount"})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"round btn btn-primary w-100",onClick:this.btnUnwrap_Clicked,children:"Unwrap!"})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),$=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).recoveredTeleport=null,a.cancellationToken=new Y,a}return Object(d.a)(n,[{key:"validateUiState",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_("#form"),A("#button"),R.clear(),!this.recoveredTeleport){e.next=7;break}P.chainId===this.recoveredTeleport.destination.chainId?(R.showOk("Teleport found"),A("#selectors"),_("#button")):P.isMetamask?R.showWarn("Switch MetaMask to the ".concat(this.recoveredTeleport.destination.name," network to energize")):P.isWalletConnect&&(R.showWarn("Sending request to change to the ".concat(this.recoveredTeleport.destination.name," network to energize")),P.switchNetwork(this.recoveredTeleport.destination.chainId)),e.next=24;break;case 7:if(t=k()("#hash").val()){e.next=10;break}return e.abrupt("return");case 10:if(!(t.length<66)){e.next=13;break}return R.showError("Invalid transaction hash"),e.abrupt("return");case 13:return e.next=15,V.recover(t);case 15:if(this.recoveredTeleport=e.sent,console.log(this.recoveredTeleport),this.recoveredTeleport){e.next=20;break}return R.showError("Teleport not found"),e.abrupt("return");case 20:R.showOk("Teleport found"),A("#selectors"),_("#button"),P.isMetamask?R.showWarn("Switch MetaMask to the ".concat(this.recoveredTeleport.destination.name," network to energize")):P.isWalletConnect&&(R.showWarn("Sending request to change to the ".concat(this.recoveredTeleport.destination.name," network to energize")),P.switchNetwork(this.recoveredTeleport.destination.chainId));case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;if(R.clear(),!P.hasListener("energize")){var t=new f.a;t.on("connect",Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),t.on("disconnect",(function(){A("#form"),R.clear(),e.cancellationToken.cancel()})),t.on("accountsChanged",function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n&&0!==n.length){t.next=3;break}return A("#form"),t.abrupt("return");case 3:return t.next=5,e.validateUiState();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.on("chainChanged",Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),P.addListener("energize",t)}P.isConnected()?_("#form"):A("#form"),k()("#hash").on("change",Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateUiState();case 2:case"end":return t.stop()}}),t)})))),k()("#button").on("click",Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R.clear(),console.log("Transaction Data:",e.recoveredTeleport.transactionData),e.cancellationToken=new Y,(n=new V(e.recoveredTeleport,e.cancellationToken)).on("error",(function(e,t){100!==e&&(R.clear(),_("#form")),R.showError("Error ".concat(e,": ").concat(t))})),n.on("ok",function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),console.log(n.teleport),R.showWarn("Energize confirmed. Processing transaction..."),e.prev=3,a=new P.web3.eth.Contract(T.app.bridgeAbi,n.teleport.destination.bridge),e.next=7,a.methods.deposit(t,n.teleport.transactionData).send({from:P.web3.eth.defaultAccount});case 7:r=e.sent,console.log("Transaction:",r),_("#form"),R.clear(),R.showOk("Energize Success!"),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(3),R.clear(),R.showError("Transaction failed!"),_("#form"),e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()),R.showWarn("Verifying teleport..."),t.next=9,n.start();case 9:case"end":return t.stop()}}),t)}))))}},{key:"componentWillUnmount",value:function(){P.removeListener("energize"),this.cancellationToken.cancel()}},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Energize"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsx)("div",{id:"selectors",children:Object(F.jsx)("div",{className:"mb-3",children:Object(F.jsx)("input",{id:"hash",className:"round btn-primary form-control input",placeholder:"Enter TX hash"})})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"btn btn-primary round w-100",children:"Energize!"})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),ee=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).btnNFT_Clicked=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.app.nftMinters[P.chainId],n=new P.web3.eth.Contract(T.app.minterAbi,t),e.next=4,n.methods.mint().send({from:P.web3.eth.defaultAccount});case 4:case"end":return e.stop()}}),e)}))),e}return Object(d.a)(n,[{key:"validateUiState",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.clear(),A("#button"),P.isConnected()){e.next=4;break}return e.abrupt("return");case 4:if(P.chainId&&0!==P.chainId){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,T.getFromMap(P.chainId);case 8:if(t=e.sent){e.next=11;break}return e.abrupt("return");case 11:if(n=T.app.nftMinters[P.chainId]){e.next=15;break}return R.showWarn("The NFT cannot be minted on this network"),e.abrupt("return");case 15:return e.next=17,T.getFmtaToken(t);case 17:return a=e.sent,r=new P.web3.eth.Contract(T.app.tokenAbi,a.address),c=new P.web3.eth.Contract(T.app.minterAbi,n),e.next=22,c.methods.hasMinted(P.web3.eth.defaultAccount).call();case 22:if(!e.sent){e.next=26;break}return R.showWarn("This address already has the NFT on this network"),e.abrupt("return");case 26:return e.next=28,c.methods.fmtaNeeded().call();case 28:return(o=e.sent)||(o=0),s=L.fromAu(o,18).toString(),e.next=33,r.methods.balanceOf(P.web3.eth.defaultAccount).call();case 33:if((u=e.sent)||(u=0),!(L.fromAu(u,18).toString()<s)){e.next=39;break}return R.showWarn("A balance of 100 FMTA is required to mint the NFT"),e.abrupt("return");case 39:_("#button");case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.clear(),P.hasListener("nft")||((t=new f.a).on("connect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("disconnect",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),t.on("accountsChanged",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateUiState();case 2:case"end":return e.stop()}}),e)})))),P.addListener("nft",t)),e.next=4,this.validateUiState();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){P.removeListener("nft")}},{key:"render",value:function(){return Object(F.jsx)("div",{className:"ps-3 pe-3",children:Object(F.jsx)("div",{className:"page-flex-container d-flex flex-row justify-content-center align-items-center",children:Object(F.jsx)("div",{className:"page-content",children:Object(F.jsxs)("form",{autoComplete:"off",className:"card border border-primary shadow",children:[Object(F.jsx)("div",{className:"card-header",children:"Free FMTA NFT"}),Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("div",{id:"form",children:[Object(F.jsx)("div",{className:"mb-3 text-center",children:"Fundamenta's turning one! In celebration of this milestone, we've decided to immortalize the moment in an NFT, cause why not?"}),Object(F.jsx)("div",{className:"mb-3 text-center",children:'So feel free to mint your own. Just need 100 fmta in your wallet and you can mint a different NFT on each chain. Get in and collect them all so you can say "I was there!" to your grandkids.'}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{type:"button",id:"button",className:"round btn btn-primary w-100",onClick:this.btnNFT_Clicked,children:"Mint!"})})]}),Object(F.jsx)(B,{})]})]})})})})}}]),n}(r.a.Component),te=(n(770),n(771),n(772),function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).em=new f.a,e.em.on("update",Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("app.update"),t.next=3,e.update();case 3:case"end":return t.stop()}}),t)})))),e}return Object(d.a)(n,[{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.fetchNetworkConfig();case 2:if("walletConnect"!==(t=localStorage.getItem("provider"))){e.next=8;break}return e.next=6,P.walletConnect();case 6:e.next=18;break;case 8:if("metamask"!==t){e.next=17;break}if(!P.isMetamaskAvailable()){e.next=14;break}return e.next=12,P.metamask();case 12:e.next=15;break;case 14:localStorage.setItem("provider","none");case 15:e.next=18;break;case 17:console.log("No existing wallet provider");case 18:return e.next=20,U.toggleNetworkWarning();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.em.emit("update"),Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(U,{id:"conn"}),Object(F.jsxs)(h.g,{children:[Object(F.jsx)(h.d,{exact:!0,path:"/",component:q}),Object(F.jsx)(h.d,{path:"/staking",component:H}),Object(F.jsx)(h.d,{path:"/mining",component:G}),Object(F.jsx)(h.d,{path:"/teleport",component:K}),Object(F.jsx)(h.d,{path:"/wrap",component:Q}),Object(F.jsx)(h.d,{path:"/unwrap",component:Z}),Object(F.jsx)(h.d,{path:"/energize",component:$}),Object(F.jsx)(h.d,{path:"/nft",component:ee})]})]})}}]),n}(r.a.Component)),ne=te,ae=n(119);o.a.render(Object(F.jsx)(ae.HashRouter,{children:Object(F.jsx)(ne,{})}),document.getElementById("root"))}},[[773,1,2]]]);
//# sourceMappingURL=main.4b4e66ac.chunk.js.map